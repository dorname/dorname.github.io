<!DOCTYPE html>
<html>
  <head>
    
    <title>js学习笔记(6)——集合类型 | Keep learning and trying</title>
    <meta charset="utf-8" />
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
    
      
        <link
          rel="stylesheet alternate"
          
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
          
          id="default"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/cerulean/bootstrap.min.css"
          
          id="cerulean"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/cosmo/bootstrap.min.css"
          
          id="cosmo"
          class="alternate"
        >
      
        <link
          rel="stylesheet"
          
          href="https://bootswatch.com/5/cyborg/bootstrap.min.css"
          
          id="cyborg"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/darkly/bootstrap.min.css"
          
          id="darkly"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/flatly/bootstrap.min.css"
          
          id="flatly"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/journal/bootstrap.min.css"
          
          id="journal"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/litera/bootstrap.min.css"
          
          id="litera"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/lumen/bootstrap.min.css"
          
          id="lumen"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/lux/bootstrap.min.css"
          
          id="lux"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/materia/bootstrap.min.css"
          
          id="materia"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/minty/bootstrap.min.css"
          
          id="minty"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/morph/bootstrap.min.css"
          
          id="morph"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/pulse/bootstrap.min.css"
          
          id="pulse"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/quartz/bootstrap.min.css"
          
          id="quartz"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/sandstone/bootstrap.min.css"
          
          id="sandstone"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/simplex/bootstrap.min.css"
          
          id="simplex"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/sketchy/bootstrap.min.css"
          
          id="sketchy"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/slate/bootstrap.min.css"
          
          id="slate"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/solar/bootstrap.min.css"
          
          id="solar"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/spacelab/bootstrap.min.css"
          
          id="spacelab"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/superhero/bootstrap.min.css"
          
          id="superhero"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/united/bootstrap.min.css"
          
          id="united"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/vapor/bootstrap.min.css"
          
          id="vapor"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/yeti/bootstrap.min.css"
          
          id="yeti"
          class="alternate"
        >
      
        <link
          rel="stylesheet alternate"
          
          href="https://bootswatch.com/5/zephyr/bootstrap.min.css"
          
          id="zephyr"
          class="alternate"
        >
      
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous"></script>
    
    <script src="https://dorname.github.io/js/topic.js"></script>
    
    
    <script src="https://dorname.github.io/js/theme.js"></script>
    
    
    <script src="https://dorname.github.io/js/scheme.js"></script>
    
    <script src="https://dorname.github.io/js/blockquote.js"></script>
    <script src="https://dorname.github.io/js/img.js"></script>
    
    <script defer src="https://dorname.github.io/elasticlunr.min.js"></script>
    <script defer src="https://dorname.github.io/search_index.en.js"></script>
    <script src="https://dorname.github.io/js/search.js"></script>
    
    
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>    
    <!-- <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>   -->
  </head>
  <body class="d-flex flex-column min-vh-100">
    
      <div class="w-100">
        <img src="https://dorname.github.io/img/banner.jpeg" class="w-100" />
      </div>
    
    
    
    
    <nav class="
      navbar
      navbar-expand-lg
      navbar-dark
      bg-dark
    ">
      <div class="container-fluid">
        <a class="navbar-brand"
          href="https:&#x2F;&#x2F;dorname.github.io&#x2F;"
          title="主页"
        >Keep learning and trying</a>
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarColor02"
          aria-controls="navbarColor02"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarColor02">
          <ul class="navbar-nav me-auto">
            
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="https:&#x2F;&#x2F;dorname.github.io&#x2F;authors"
                >作者</a>
              </li>
            
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="https:&#x2F;&#x2F;dorname.github.io&#x2F;about"
                >关于</a>
              </li>
            
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="https:&#x2F;&#x2F;dorname.github.io&#x2F;tags"
                >相关主题</a>
              </li>
            
              <li class="nav-item">
                <a
                  class="nav-link"
                  href="https:&#x2F;&#x2F;github.com&#x2F;dorname?tab=repositories"
                >Github</a>
              </li>
            
            
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  博客分类
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;rust"
                        onclick="switchTopic('Rust学习')"
                      >Rust学习</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;articles"
                        onclick="switchTopic('未分类博客')"
                      >未分类博客</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;js_learning"
                        onclick="switchTopic('js学习')"
                      >Js学习</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;webAssembly_rust_and_extJs-lab"
                        onclick="switchTopic('Extjs&#x2F;Rust&#x2F;WASM实验')"
                      >Extjs&#x2F;rust&#x2F;wasm实验</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;blockchain"
                        onclick="switchTopic('区块链')"
                      >区块链</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;mega_git"
                        onclick="switchTopic('Mega')"
                      >Mega</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;distributed_system"
                        onclick="switchTopic('分布式理论')"
                      >分布式理论</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;docker"
                        onclick="switchTopic('Docker容器')"
                      >Docker容器</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;kubernetes"
                        onclick="switchTopic('k8s')"
                      >K8s</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;gradle"
                        onclick="switchTopic('gradle')"
                      >Gradle</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="https:&#x2F;&#x2F;dorname.github.io&#x2F;java"
                        onclick="switchTopic('java')"
                      >Java</a>
                    </li>
                  
                </ul>
              </li>
            
            
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  选择一个主题
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('default')"
                      >Default</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('cerulean')"
                      >Cerulean</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('cosmo')"
                      >Cosmo</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('cyborg')"
                      >Cyborg</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('darkly')"
                      >Darkly</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('flatly')"
                      >Flatly</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('journal')"
                      >Journal</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('litera')"
                      >Litera</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('lumen')"
                      >Lumen</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('lux')"
                      >Lux</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('materia')"
                      >Materia</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('minty')"
                      >Minty</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('morph')"
                      >Morph</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('pulse')"
                      >Pulse</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('quartz')"
                      >Quartz</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('sandstone')"
                      >Sandstone</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('simplex')"
                      >Simplex</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('sketchy')"
                      >Sketchy</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('slate')"
                      >Slate</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('solar')"
                      >Solar</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('spacelab')"
                      >Spacelab</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('superhero')"
                      >Superhero</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('united')"
                      >United</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('vapor')"
                      >Vapor</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('yeti')"
                      >Yeti</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchTheme('zephyr')"
                      >Zephyr</a>
                    </li>
                  
                </ul>
              </li>
            
            
              <li class="nav-item dropdown">
                <a
                  class="nav-link dropdown-toggle"
                  href="#"
                  id="navbarDropdown"
                  role="button"
                  data-bs-toggle="dropdown"
                  aria-expanded="false"
                >
                  选择一个Scheme颜色
                </a>
                <ul class="dropdown-menu" aria-labelledby="navbarDropdown">
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('dark')"
                      >Dark</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('light')"
                      >Light</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('primary')"
                      >Primary</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('primary inverted')"
                      >Primary inverted</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('secondary')"
                      >Secondary</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('secondary inverted')"
                      >Secondary inverted</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('success')"
                      >Success</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('success inverted')"
                      >Success inverted</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('danger')"
                      >Danger</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('danger inverted')"
                      >Danger inverted</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('warning')"
                      >Warning</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('warning inverted')"
                      >Warning inverted</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('info')"
                      >Info</a>
                    </li>
                  
                    <li>
                      <a
                        class="dropdown-item"
                        href="#"
                        onclick="switchScheme('info inverted')"
                      >Info inverted</a>
                    </li>
                  
                </ul>
              </li>
            
          </ul>
          
          <form class="d-flex" onsubmit="return goSearch(event)">
            <input
              class="form-control me-sm-2"
              type="text"
              placeholder="搜索"
            />
            <button
              class="btn btn-secondary my-2 my-sm-0"
              type="submit"
            ><i class="fas fa-search"></i></button>
          </form>
          
        </div>
      </div>
    </nav>
    <main class="container mx-auto my-5">
      
  <h1>js学习笔记(6)——集合类型</h1>
  <p class="text-muted">
    
  
  
    
    <a
      class="text-decoration-none text-reset"
      href="https://dorname.github.io/authors/liguangqiao/"
      title="Li Guangqiao"
    ><b>Li Guangqiao</b></a>
   - 
  12&#x2F;08&#x2F;2023

  </p>
  
  <p>
    
      <a
        href="https://dorname.github.io/tags/js/"
        class="badge bg-dark text-decoration-none link-light me-1"
      >
        js
      </a>
    
  </p>
  
  <div class="content">
    <h1 id="ji-he-yin-yong-lei-xing"><strong>集合引用类型</strong></h1>
<h2 id="object"><em><strong>Object</strong></em></h2>
<p><code>Object</code>很适合存储和在应用程序间交换数据。</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">//声明方式
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">obj </span><span>= new Object();
</span><span style="color:#bf616a;">obj</span><span>.</span><span style="color:#bf616a;">age </span><span>= </span><span style="color:#d08770;">1</span><span>;
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">obj_one </span><span>= {
</span><span>    age:</span><span style="color:#d08770;">1
</span><span>};
</span><span style="color:#65737e;">//属性访问
</span><span style="color:#65737e;">//点语法
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">obj</span><span>.</span><span style="color:#bf616a;">age</span><span>);
</span><span style="color:#65737e;">//变量语法
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">obj</span><span>[&quot;</span><span style="color:#a3be8c;">age</span><span>&quot;]);
</span></code></pre>
<p><code>Object</code>不管是实验和生产环境中都很常用所以这里不做过多的阐述</p>
<h2 id="array"><em><strong>Array</strong></em></h2>
<p><code>Array</code>同样是<code>js</code>中常用的引用类型。</p>
<p><code>js</code>的数组不同于其他编程语言，其每一个槽位都可以存储任意类型的数据。</p>
<h3 id="shu-zu-chuang-jian">数组创建</h3>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">//长度为20的空数组
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= new Array(</span><span style="color:#d08770;">20</span><span>);
</span><span style="color:#65737e;">//成员为&quot;1&quot;,&quot;2&quot;的数组
</span><span style="color:#bf616a;">colors </span><span>= new Array(&quot;</span><span style="color:#a3be8c;">1</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">2</span><span>&quot;);
</span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">1</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">2</span><span>&quot;];
</span></code></pre>
<p><strong>ES6中还有两个创建数组的方法</strong></p>
<ul>
<li>通过<code>from</code>方法去创建数组</li>
</ul>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">// 字符串会被拆分为单字符数组
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(&quot;</span><span style="color:#a3be8c;">Matt</span><span>&quot;)); </span><span style="color:#65737e;">// [&quot;M&quot;, &quot;a&quot;, &quot;t&quot;, &quot;t&quot;]
</span><span>
</span><span style="color:#65737e;">// 可以使用 from()将集合和映射转换为一个新数组
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">m </span><span>= new Map().</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>) 
</span><span> .</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">s </span><span>= new Set().</span><span style="color:#96b5b4;">add</span><span>(</span><span style="color:#d08770;">1</span><span>) 
</span><span> .</span><span style="color:#96b5b4;">add</span><span>(</span><span style="color:#d08770;">2</span><span>) 
</span><span> .</span><span style="color:#96b5b4;">add</span><span>(</span><span style="color:#d08770;">3</span><span>) 
</span><span> .</span><span style="color:#96b5b4;">add</span><span>(</span><span style="color:#d08770;">4</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">m</span><span>)); </span><span style="color:#65737e;">// [[1, 2], [3, 4]] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">s</span><span>)); </span><span style="color:#65737e;">// [1, 2, 3, 4]
</span><span>
</span><span style="color:#65737e;">// Array.from()对现有数组执行浅复制
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">a1 </span><span>= [</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>]; 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">a2 </span><span>= </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">a1</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">a1</span><span>); </span><span style="color:#65737e;">// [1, 2, 3, 4] 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">a1 </span><span>=== </span><span style="color:#bf616a;">a2</span><span>); </span><span style="color:#65737e;">// false
</span><span>
</span><span style="color:#65737e;">// 可以使用任何可迭代对象
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">iter </span><span>= { 
</span><span> </span><span style="color:#b48ead;">*</span><span>[</span><span style="color:#ebcb8b;">Symbol</span><span>.</span><span style="color:#bf616a;">iterator</span><span>]() { 
</span><span> </span><span style="color:#b48ead;">yield </span><span style="color:#d08770;">1</span><span>; 
</span><span> </span><span style="color:#b48ead;">yield </span><span style="color:#d08770;">2</span><span>; 
</span><span> </span><span style="color:#b48ead;">yield </span><span style="color:#d08770;">3</span><span>; 
</span><span> </span><span style="color:#b48ead;">yield </span><span style="color:#d08770;">4</span><span>; 
</span><span> } 
</span><span>}; 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">iter</span><span>)); </span><span style="color:#65737e;">// [1, 2, 3, 4]
</span><span>
</span><span style="color:#65737e;">// arguments 对象可以被轻松地转换为数组
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">getArgsArray</span><span>() { 
</span><span> </span><span style="color:#b48ead;">return </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">arguments</span><span>); 
</span><span>} 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#8fa1b3;">getArgsArray</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>)); </span><span style="color:#65737e;">// [1, 2, 3, 4] 
</span><span style="color:#65737e;">// from()也能转换带有必要属性的自定义对象
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">arrayLikeObject </span><span>= { 
</span><span> </span><span style="color:#d08770;">0</span><span>: </span><span style="color:#d08770;">1</span><span>, 
</span><span> </span><span style="color:#d08770;">1</span><span>: </span><span style="color:#d08770;">2</span><span>, 
</span><span> </span><span style="color:#d08770;">2</span><span>: </span><span style="color:#d08770;">3</span><span>, 
</span><span> </span><span style="color:#d08770;">3</span><span>: </span><span style="color:#d08770;">4</span><span>, 
</span><span> length: </span><span style="color:#d08770;">4 
</span><span>}; 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">arrayLikeObject</span><span>)); </span><span style="color:#65737e;">// [1, 2, 3, 4]
</span></code></pre>
<ul>
<li>
<p><code>Array.from</code>还有两个参数，</p>
<p>第二个参数是可选的映射函数，用于增强新数组的值</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>([</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>,</span><span style="color:#d08770;">4</span><span>],(</span><span style="color:#bf616a;">item</span><span>)</span><span style="color:#b48ead;">=&gt;</span><span style="color:#bf616a;">item</span><span>+</span><span style="color:#d08770;">1</span><span>);</span><span style="color:#65737e;">//[2,3,4,5]
</span><span style="color:#65737e;">//等价于
</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>([</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>,</span><span style="color:#d08770;">4</span><span>]).</span><span style="color:#8fa1b3;">map</span><span>((</span><span style="color:#bf616a;">item</span><span>)</span><span style="color:#b48ead;">=&gt;</span><span style="color:#bf616a;">item</span><span>+</span><span style="color:#d08770;">1</span><span>);</span><span style="color:#65737e;">//[2,3,4,5]
</span></code></pre>
<p>第三个参数指定映射函数中的上下文this，固定作用域和调用者</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>([</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">3</span><span>,</span><span style="color:#d08770;">4</span><span>],</span><span style="color:#b48ead;">function</span><span>(</span><span style="color:#bf616a;">item</span><span>){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">this</span><span>);
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">item</span><span>+</span><span style="color:#bf616a;">this</span><span>.</span><span style="color:#bf616a;">num</span><span>;
</span><span>},{id:&quot;</span><span style="color:#a3be8c;">test</span><span>&quot;,num:</span><span style="color:#d08770;">2</span><span>});
</span></code></pre>
</li>
<li>
<p>通过<code>of</code>方法去创建数组</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">/*Array.of()可以把一组参数转换为数组。这个方法用于替代在 ES6之前常用的 Array.prototype. 
</span><span style="color:#65737e;">slice.call(arguments)，一种异常笨拙的将 arguments 对象转换为数组的写法：*/
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">of</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>)); </span><span style="color:#65737e;">// [1, 2, 3, 4] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">of</span><span>(</span><span style="color:#d08770;">undefined</span><span>)); </span><span style="color:#65737e;">// [undefined]
</span></code></pre>
</li>
</ul>
<h3 id="shu-zu-kong-wei">数组空位</h3>
<p>生产环境数组空位会有诸多隐患故暂时不做过多的了解。</p>
<h3 id="shu-zu-suo-yin">数组索引</h3>
<p>常规的数组索引与其他语言保持一致，本小节重点将放在数组的<code>length</code>属性上。</p>
<ul>
<li>
<p><code>length</code>并非只读属性，可修改</p>
</li>
<li>
<p>通过修改<code>length</code>属性可新增和删除数组元素。</p>
<ul>
<li>
<p>新增</p>
<p>直接增加数组长度，会新增多个空的<code>undefined</code>元素</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">r</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">g</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">b</span><span>&quot;];
</span><span style="color:#bf616a;">colors</span><span>.length = </span><span style="color:#d08770;">4</span><span>;
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>[</span><span style="color:#d08770;">3</span><span>]); </span><span style="color:#65737e;">//undefined
</span></code></pre>
<p>对<code>length</code>位置进行赋值</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">r</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">g</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">b</span><span>&quot;];
</span><span style="color:#bf616a;">colors</span><span>[</span><span style="color:#d08770;">3</span><span>] = &quot;</span><span style="color:#a3be8c;">y</span><span>&quot;;
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>[</span><span style="color:#d08770;">3</span><span>]); </span><span style="color:#65737e;">//&quot;y&quot;
</span></code></pre>
</li>
<li>
<p>删除</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">r</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">g</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">b</span><span>&quot;];
</span><span style="color:#bf616a;">colors</span><span>.length = </span><span style="color:#d08770;">2</span><span>;
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>[</span><span style="color:#d08770;">2</span><span>]); </span><span style="color:#65737e;">// undefined
</span></code></pre>
</li>
</ul>
</li>
</ul>
<h3 id="shu-zu-jian-ce">数组检测</h3>
<ul>
<li>
<p>单页应用</p>
<p>使用<code>instanceof</code>进行数组类型的判断</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>([] instanceof Array); </span><span style="color:#65737e;">//true
</span></code></pre>
</li>
<li>
<p>多页应用</p>
<p>使用<code>Array.isArray()</code>方法进行数组类型判断</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">isArray</span><span>([]);
</span></code></pre>
</li>
</ul>
<h3 id="die-dai-qi-fang-fa">迭代器方法</h3>
<p><strong>ES6</strong>中Array的原型暴露了3个数组检索方法</p>
<ul>
<li>
<p><code>keys()</code></p>
</li>
<li>
<p><code>values()</code></p>
</li>
<li>
<p><code>entries()</code></p>
</li>
</ul>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">a </span><span>= [&quot;</span><span style="color:#a3be8c;">foo</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">bar</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">baz</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">qux</span><span>&quot;]; 
</span><span style="color:#65737e;">// 因为这些方法都返回迭代器，所以可以将它们的内容
</span><span style="color:#65737e;">// 通过 Array.from()直接转换为数组实例
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">aKeys </span><span>= </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">a</span><span>.</span><span style="color:#96b5b4;">keys</span><span>()); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">aValues </span><span>= </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">a</span><span>.</span><span style="color:#96b5b4;">values</span><span>()); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">aEntries </span><span>= </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">a</span><span>.</span><span style="color:#96b5b4;">entries</span><span>()); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">aKeys</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">aValues</span><span>); </span><span style="color:#65737e;">// [&quot;foo&quot;, &quot;bar&quot;, &quot;baz&quot;, &quot;qux&quot;] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">aEntries</span><span>); </span><span style="color:#65737e;">// [[0, &quot;foo&quot;], [1, &quot;bar&quot;], [2, &quot;baz&quot;], [3, &quot;qux&quot;]]
</span></code></pre>
<p>使用 <strong>ES6</strong> 的解构可以非常容易地在循环中拆分键/值对：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">a </span><span>= [&quot;</span><span style="color:#a3be8c;">foo</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">bar</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">baz</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">qux</span><span>&quot;]; 
</span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">const </span><span>[</span><span style="color:#bf616a;">idx</span><span>, </span><span style="color:#bf616a;">element</span><span>] of </span><span style="color:#bf616a;">a</span><span>.</span><span style="color:#96b5b4;">entries</span><span>()) { 
</span><span> </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">idx</span><span>); 
</span><span> </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">element</span><span>); 
</span><span>} 
</span><span style="color:#65737e;">// 0 
</span><span style="color:#65737e;">// foo 
</span><span style="color:#65737e;">// 1 
</span><span style="color:#65737e;">// bar 
</span><span style="color:#65737e;">// 2 
</span><span style="color:#65737e;">// baz 
</span><span style="color:#65737e;">// 3 
</span><span style="color:#65737e;">// qux
</span></code></pre>
<h3 id="fu-zhi-he-tian-chong-fang-fa">复制和填充方法</h3>
<p><strong>ES6</strong> 新增了两个方法：批量复制方法 <code>copyWithin()</code>，以及填充数组方法 <code>fill()</code>。这两个方法的函数签名类似，都需要指定既有数组实例上的一个范围，包含开始索引，不包含结束索引。使用这个方法不会改变数组的大小。</p>
<ul>
<li>
<p><code>fill()</code>拥有三个参数，参数1填充值、参数2开始索引和参数3结束索引</p>
<p>使用 <code>fill()</code>方法可以向一个已有的数组中插入全部或部分相同的值。开始索引用于指定开始填充的位置，它是可选的。如果不提供结束索引，则一直填充到数组末尾。负值索引从数组末尾开始计算。也可以将负索引想象成数组长度加上它得到的一个正索引：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">zeroes </span><span>= [</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>]; 
</span><span style="color:#65737e;">// 用 5 填充整个数组
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">5</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [5, 5, 5, 5, 5] 
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">0</span><span>); </span><span style="color:#65737e;">// 重置
</span><span style="color:#65737e;">// 用 6 填充索引大于等于 3 的元素
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">6</span><span>, </span><span style="color:#d08770;">3</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [0, 0, 0, 6, 6] 
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">0</span><span>); </span><span style="color:#65737e;">// 重置
</span><span style="color:#65737e;">// 用 7 填充索引大于等于 1 且小于 3 的元素
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">7</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">3</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [0, 7, 7, 0, 0]; 
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">0</span><span>); </span><span style="color:#65737e;">// 重置
</span><span style="color:#65737e;">// 用 8 填充索引大于等于 1 且小于 4 的元素
</span><span style="color:#65737e;">// (-4 + zeroes.length = 1) 
</span><span style="color:#65737e;">// (-1 + zeroes.length = 4) 
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">8</span><span>, -</span><span style="color:#d08770;">4</span><span>, -</span><span style="color:#d08770;">1</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [0, 8, 8, 8, 0]; 
</span><span style="color:#8fa1b3;">fill</span><span>()</span><span style="color:#bf616a;">静默忽略超出数组边界</span><span>、</span><span style="color:#bf616a;">零长度及方向相反的索引范围</span><span>：
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">zeroes </span><span>= [</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0</span><span>]; 
</span><span style="color:#65737e;">// 索引过低，忽略
</span><span style="color:#65737e;">// (-10 + zeroes.length = -5) 
</span><span style="color:#65737e;">// (-6 + zeroes.length = -1) 
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">1</span><span>, -</span><span style="color:#d08770;">10</span><span>, -</span><span style="color:#d08770;">6</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [0, 0, 0, 0, 0] 
</span><span style="color:#65737e;">// 索引过高，忽略
</span><span style="color:#65737e;">// (10 &gt; zeroes.length) 
</span><span style="color:#65737e;">// (15 &gt; zeroes.length) 
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">10</span><span>, </span><span style="color:#d08770;">15</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [0, 0, 0, 0, 0] 
</span><span style="color:#65737e;">// 索引反向，忽略
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">2</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [0, 0, 0, 0, 0] 
</span><span style="color:#65737e;">// 索引部分可用，填充可用部分
</span><span style="color:#bf616a;">zeroes</span><span>.</span><span style="color:#8fa1b3;">fill</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">10</span><span>) 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">zeroes</span><span>); </span><span style="color:#65737e;">// [0, 0, 0, 4, 4]
</span></code></pre>
</li>
<li>
<p><code>copyWithin()</code></p>
<p>与 <code>fill()</code>不同，<code>copyWithin()</code>会按照指定范围浅复制数组中的部分内容，然后将它们插入到指定索引开始的位置。开始索引和结束索引则与 <code>fill()</code>使用同样的计算方法：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">ints</span><span>, 
</span><span> </span><span style="color:#8fa1b3;">reset </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">ints </span><span>= [</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">5</span><span>, </span><span style="color:#d08770;">6</span><span>, </span><span style="color:#d08770;">7</span><span>, </span><span style="color:#d08770;">8</span><span>, </span><span style="color:#d08770;">9</span><span>]; 
</span><span style="color:#8fa1b3;">reset</span><span>(); 
</span><span style="color:#65737e;">// 从 ints 中复制索引 0 开始的内容，插入到索引 5 开始的位置
</span><span style="color:#65737e;">// 在源索引或目标索引到达数组边界时停止
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">5</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3, 4, 0, 1, 2, 3, 4] 
</span><span style="color:#8fa1b3;">reset</span><span>(); 
</span><span style="color:#65737e;">// 从 ints 中复制索引 5 开始的内容，插入到索引 0 开始的位置
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">5</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [5, 6, 7, 8, 9, 5, 6, 7, 8, 9]
</span><span style="color:#8fa1b3;">reset</span><span>();
</span><span style="color:#65737e;">// 从 ints 中复制索引 0 开始到索引 3 结束的内容
</span><span style="color:#65737e;">// 插入到索引 4 开始的位置
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">3</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3, 0, 1, 2, 7, 8, 9] 
</span><span style="color:#8fa1b3;">reset</span><span>(); 
</span><span style="color:#65737e;">// JavaScript 引擎在插值前会完整复制范围内的值
</span><span style="color:#65737e;">// 因此复制期间不存在重写的风险
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">6</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 0, 1, 2, 3, 4, 5, 8, 9] 
</span><span style="color:#8fa1b3;">reset</span><span>(); 
</span><span style="color:#65737e;">// 支持负索引值，与 fill()相对于数组末尾计算正向索引的过程是一样的
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(-</span><span style="color:#d08770;">4</span><span>, -</span><span style="color:#d08770;">7</span><span>, -</span><span style="color:#d08770;">3</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3, 4, 5, 3, 4, 5, 6] 
</span><span style="color:#8fa1b3;">copyWithin</span><span>()</span><span style="color:#bf616a;">静默忽略超出数组边界</span><span>、</span><span style="color:#bf616a;">零长度及方向相反的索引范围</span><span>：
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">ints</span><span>, 
</span><span> </span><span style="color:#8fa1b3;">reset </span><span>= () </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">ints </span><span>= [</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">5</span><span>, </span><span style="color:#d08770;">6</span><span>, </span><span style="color:#d08770;">7</span><span>, </span><span style="color:#d08770;">8</span><span>, </span><span style="color:#d08770;">9</span><span>]; 
</span><span style="color:#8fa1b3;">reset</span><span>(); 
</span><span style="color:#65737e;">// 索引过低，忽略
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">1</span><span>, -</span><span style="color:#d08770;">15</span><span>, -</span><span style="color:#d08770;">12</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]; 
</span><span style="color:#8fa1b3;">reset</span><span>() 
</span><span style="color:#65737e;">// 索引过高，忽略
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">12</span><span>, </span><span style="color:#d08770;">15</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]; 
</span><span style="color:#8fa1b3;">reset</span><span>(); 
</span><span style="color:#65737e;">// 索引反向，忽略
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">2</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]; 
</span><span style="color:#8fa1b3;">reset</span><span>(); 
</span><span style="color:#65737e;">// 索引部分可用，复制、填充可用部分
</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">copyWithin</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">7</span><span>, </span><span style="color:#d08770;">10</span><span>) 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, 1, 2, 3, 7, 8, 9, 7, 8, 9];
</span></code></pre>
</li>
</ul>
<h3 id="zhuan-huan-fang-fa">转换方法</h3>
<p>所有对象都会有三个转换方法：</p>
<ul>
<li>
<p><code>toLocaleString</code></p>
<p>返回一个逗号分隔的数组值的字符串。它与另外两个方法唯一的区别是，为了得到最终的字符串，会调用数组每个值的 <code>toLocaleString()</code>方法，而不是<code>toString()</code>方法。</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">person1 </span><span>= { 
</span><span> </span><span style="color:#8fa1b3;">toLocaleString</span><span>() { 
</span><span> </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Nikolaos</span><span>&quot;; 
</span><span> }, 
</span><span> </span><span style="color:#8fa1b3;">toString</span><span>() { 
</span><span> </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Nicholas</span><span>&quot;; 
</span><span> } 
</span><span>}; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">person2 </span><span>= { 
</span><span> </span><span style="color:#8fa1b3;">toLocaleString</span><span>() { 
</span><span> </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Grigorios</span><span>&quot;; 
</span><span> }, 
</span><span> </span><span style="color:#8fa1b3;">toString</span><span>() { 
</span><span> </span><span style="color:#b48ead;">return </span><span>&quot;</span><span style="color:#a3be8c;">Greg</span><span>&quot;; 
</span><span> } 
</span><span>}; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">people </span><span>= [</span><span style="color:#bf616a;">person1</span><span>, </span><span style="color:#bf616a;">person2</span><span>]; 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">people</span><span>); </span><span style="color:#65737e;">// Nicholas,Greg 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#96b5b4;">toString</span><span>()); </span><span style="color:#65737e;">// Nicholas,Greg 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#96b5b4;">toLocaleString</span><span>()); </span><span style="color:#65737e;">// Nikolaos,Grigorios
</span></code></pre>
<p>这里定义了两个对象<code> person1</code> 和<code> person2</code>，它们都定义了 <code>toString()</code>和 <code>toLocaleString()</code>方法，而且返回不同的值。然后又创建了一个包含这两个对象的数组 <code>people</code>。在将数组传给 <code>alert()</code>时，输出的是<code>&quot;Nicholas,Greg&quot;</code>，这是因为会在数组每一项上调用 toString()方法（与下一行显式调用<code>toString()</code>方法结果一样）。而在调用数组的 <code>toLocaleString()</code>方法时，结果变成了<code>&quot;Nikolaos, Grigorios&quot;</code>，这是因为调用了数组每一项的 <code>toLocaleString()</code>方法。</p>
</li>
<li>
<p><code>toString</code> 返回由数组中每个值的等效字符串拼接而成的一个逗号分隔的字符串。也就是说，对数组的每个值都会调用其 <code>toString()</code>方法，以得到最终的字符串。</p>
</li>
<li>
<p><code>valueOf</code> 返回的还是数组本身。</p>
<p>继承的方法 <code>toLocaleString()</code>以及 <code>toString()</code>都返回数组值的逗号分隔的字符串。如果想使用不同的分隔符，则可以使用 <code>join()</code>方法。<code>join()</code>方法接收一个参数，即字符串分隔符，返回包含所有项的字符串。来看下面的例子：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">green</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">blue</span><span>&quot;]; 
</span><span>
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">join</span><span>(&quot;</span><span style="color:#a3be8c;">,</span><span>&quot;)); </span><span style="color:#65737e;">// red,green,blue 
</span><span>
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">join</span><span>(&quot;</span><span style="color:#a3be8c;">||</span><span>&quot;)); </span><span style="color:#65737e;">// red||green||blue 
</span></code></pre>
<p>这里在 <code>colors</code> 数组上调用了 <code>join()</code>方法，得到了与调<code>toString()</code>方法相同的结果。传入逗号，结果就是逗号分隔的字符串。最后一行给 <code>join()</code> 传入了双竖线，得到了字符串<code>&quot;red||green||blue&quot;</code>。如果不给 <code>join()</code>传入任何参数，或者传入 <code>undefined</code>，则仍然使用逗号作为分隔符。</p>
</li>
</ul>
<p><strong>注意：如果数组中某一项是 <code>null</code> 或<code> undefined</code>，则在 <code>join()</code> 、<code>toLocaleString()</code>、<code>toString()</code>和<code> valueOf()</code>返回的结果中会以空字符串表示 。</strong></p>
<h3 id="zhan-fang-fa">栈方法</h3>
<p><strong>LIFO(Last-In-First-Out)</strong></p>
<ul>
<li><code>push</code>： 数组末尾插入一个新的数据项（入栈方法）。</li>
<li><code>pop</code>：函数数组最后一项（出栈方法）。</li>
</ul>
<h3 id="dui-lie-fang-fa">队列方法</h3>
<p><strong>FIFO(First-In-First-Out)</strong></p>
<ul>
<li><code>shift</code> 获取数组的第一项数据项，并将其移出数组。</li>
<li><code>unshift</code> 在数组添加任意多的值，然后返回新的数组长度。</li>
</ul>
<h3 id="pai-xu-fang-fa">排序方法</h3>
<ul>
<li>
<p><code>reverse</code> 反向排序</p>
</li>
<li>
<p><code>sort</code> 排序结果默认为字符串升序。可以传入自定义的排序策略函数。比较函数就是要返回小于 0、0 和大于 0 的数值，因此减法操作完全可以满足要求。</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">compare</span><span>(</span><span style="color:#bf616a;">value1</span><span>, </span><span style="color:#bf616a;">value2</span><span>) { 
</span><span> </span><span style="color:#b48ead;">if </span><span>(</span><span style="color:#bf616a;">value1 </span><span>&lt; </span><span style="color:#bf616a;">value2</span><span>) { 
</span><span> </span><span style="color:#b48ead;">return </span><span>-</span><span style="color:#d08770;">1</span><span>; 
</span><span> } </span><span style="color:#b48ead;">else if </span><span>(</span><span style="color:#bf616a;">value1 </span><span>&gt; </span><span style="color:#bf616a;">value2</span><span>) { 
</span><span> </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">1</span><span>; 
</span><span> } </span><span style="color:#b48ead;">else </span><span>{ 
</span><span> </span><span style="color:#b48ead;">return </span><span style="color:#d08770;">0</span><span>; 
</span><span> } 
</span><span>}
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">values </span><span>= [</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">5</span><span>, </span><span style="color:#d08770;">10</span><span>, </span><span style="color:#d08770;">15</span><span>]; 
</span><span style="color:#bf616a;">values</span><span>.</span><span style="color:#96b5b4;">sort</span><span>(</span><span style="color:#bf616a;">compare</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">values</span><span>); </span><span style="color:#65737e;">// 0,1,5,10,15
</span></code></pre>
</li>
</ul>
<p><strong>注意：reverse和sort都返回调用它们的数组引用</strong></p>
<h3 id="cao-zuo-fang-fa">操作方法</h3>
<ul>
<li>
<p><code>concat</code></p>
<p><code>concat</code>方法可以在现有数组全部元素基础上创建一个新数组。</p>
<ol>
<li>首先创建数组副本。</li>
<li>方法参数添加到数组副本末尾。</li>
<li>返回副本数组。</li>
</ol>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">green</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">blue</span><span>&quot;]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors2 </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">concat</span><span>(&quot;</span><span style="color:#a3be8c;">yellow</span><span>&quot;, [&quot;</span><span style="color:#a3be8c;">black</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">brown</span><span>&quot;]); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>); </span><span style="color:#65737e;">// [&quot;red&quot;, &quot;green&quot;,&quot;blue&quot;] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors2</span><span>); </span><span style="color:#65737e;">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, &quot;black&quot;, &quot;brown&quot;]
</span></code></pre>
<p>打平数组参数的行为可以重写，方法是在参数数组上指定一个特殊的符号：<code>Symbol.isConcatSpreadable</code>。这个符号能够阻止 <code>concat()</code>打平参数数组。相反，把这个值设置为 true 可以强制打平类数组对象：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">green</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">blue</span><span>&quot;]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">newColors </span><span>= [&quot;</span><span style="color:#a3be8c;">black</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">brown</span><span>&quot;]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">moreNewColors </span><span>= { 
</span><span> [</span><span style="color:#ebcb8b;">Symbol</span><span>.</span><span style="color:#bf616a;">isConcatSpreadable</span><span>]: </span><span style="color:#d08770;">true</span><span>, 
</span><span> length: </span><span style="color:#d08770;">2</span><span>, 
</span><span> </span><span style="color:#d08770;">0</span><span>: &quot;</span><span style="color:#a3be8c;">pink</span><span>&quot;, 
</span><span> </span><span style="color:#d08770;">1</span><span>: &quot;</span><span style="color:#a3be8c;">cyan</span><span>&quot; 
</span><span>}; 
</span><span style="color:#bf616a;">newColors</span><span>[</span><span style="color:#ebcb8b;">Symbol</span><span>.</span><span style="color:#bf616a;">isConcatSpreadable</span><span>] = </span><span style="color:#d08770;">false</span><span>; 
</span><span style="color:#65737e;">// 强制不打平数组
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors2 </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">concat</span><span>(&quot;</span><span style="color:#a3be8c;">yellow</span><span>&quot;, </span><span style="color:#bf616a;">newColors</span><span>); 
</span><span style="color:#65737e;">// 强制打平类数组对象
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors3 </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">concat</span><span>(</span><span style="color:#bf616a;">moreNewColors</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>); </span><span style="color:#65737e;">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors2</span><span>); </span><span style="color:#65737e;">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;yellow&quot;, [&quot;black&quot;, &quot;brown&quot;]] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors3</span><span>); </span><span style="color:#65737e;">// [&quot;red&quot;, &quot;green&quot;, &quot;blue&quot;, &quot;pink&quot;, &quot;cyan&quot;]
</span></code></pre>
</li>
<li>
<p><code>slice</code></p>
<p><code>slice</code>方法用于创建一个包含原有数组中一个或者多个元素的新数组。<code>slice</code>方法可以接受一个或者两个参数：返回元素的开始索引和结束索引。如果只有一个参数，则<code>slice</code>会返回该索引到数组末尾的所有元素。如果有两个参数，则<code>slice</code>返回从开始索引到结束索引对应的所有元素，其中不包含结束索引对应的元素。此操作不会影响原始数组。</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">green</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">blue</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">yellow</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">purple</span><span>&quot;]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors2 </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">slice</span><span>(</span><span style="color:#d08770;">1</span><span>); 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors3 </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">slice</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">4</span><span>); 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors4 </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">slice</span><span>(</span><span style="color:#d08770;">1</span><span>,-</span><span style="color:#d08770;">1</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors2</span><span>); </span><span style="color:#65737e;">// green,blue,yellow,purple 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors3</span><span>); </span><span style="color:#65737e;">// green,blue,yellow
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors4</span><span>); </span><span style="color:#65737e;">// green,blue,yellow
</span></code></pre>
<p><strong>注意：如果<code>slice()</code>的参数有负值，那么就以数值长度加上这个负值的结果确定位置。比如，在包含 5 个元素的数组上调用 <code>slice(-2,-1)</code>，就相当于调用 <code>slice(3,4)</code>。如果结束位置小于开始位置，则返回空数组。</strong></p>
</li>
<li>
<p><code>splice</code></p>
<p><code>splice</code>的主要目的是在数组中间插入元素。</p>
<ol>
<li>
<p>删除。需要给<code>splice</code>传2个参数：要删除的第一个元素的位置和要删除的元素数量。</p>
</li>
<li>
<p>插入。需要给<code>splice</code>传3个参数：开始位置、要删除的元素数量和要插入的元素，可以在数组中指定的位置插入元素。第三个参数之后还可以传第四个、第五个参数，乃至任意多个要插入的元素。</p>
<p>比如：<code>splice(2,0,&quot;red&quot;,&quot;green&quot;)</code>会从数组位置2开始插入字符串<code>&quot;red&quot;</code>和<code>&quot;green&quot;</code>。</p>
</li>
<li>
<p>替换。<code>splice()</code>在删除元素的同时可以在指定位置插入新元素，同样要传入 3 个参数：开始位置、要删除元素的数量和要插入的任意多个元素。要插入的元素数量不一定跟删除的元素数量一致。比如，<code>splice(2, 1, &quot;red&quot;, &quot;green&quot;)</code>会在位置 2 删除一个元素，然后从该位置开始向数组中插入<code>&quot;red&quot;</code>和<code>&quot;green&quot;</code>。</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">green</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">blue</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">yellow</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">purple</span><span>&quot;]; 
</span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">splice</span><span>(</span><span style="color:#d08770;">2</span><span>,</span><span style="color:#d08770;">1</span><span>,&quot;</span><span style="color:#a3be8c;">black</span><span>&quot;,&quot;</span><span style="color:#a3be8c;">gray</span><span>&quot;);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>,&quot;</span><span style="color:#a3be8c;">&lt;&lt;&lt;</span><span>&quot;);
</span><span style="color:#65737e;">//(6) [&#39;red&#39;, &#39;green&#39;, &#39;black&#39;, &#39;gray&#39;, &#39;yellow&#39;, &#39;purple&#39;] &lt;&lt;&lt;
</span></code></pre>
</li>
</ol>
<p><strong>注意：<code>splice()</code>方法始终返回这样一个数组，它包含从数组中被删除的元素（如果没有删除元素，则返回空数组）。</strong></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">colors </span><span>= [&quot;</span><span style="color:#a3be8c;">red</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">green</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">blue</span><span>&quot;]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">removed </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">splice</span><span>(</span><span style="color:#d08770;">0</span><span>,</span><span style="color:#d08770;">1</span><span>); </span><span style="color:#65737e;">// 删除第一项
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>); </span><span style="color:#65737e;">// green,blue 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">removed</span><span>); </span><span style="color:#65737e;">// red，只有一个元素的数组
</span><span style="color:#bf616a;">removed </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">splice</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">0</span><span>, &quot;</span><span style="color:#a3be8c;">yellow</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">orange</span><span>&quot;); </span><span style="color:#65737e;">// 在位置 1 插入两个元素
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>); </span><span style="color:#65737e;">// green,yellow,orange,blue 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">removed</span><span>); </span><span style="color:#65737e;">// 空数组
</span><span style="color:#bf616a;">removed </span><span>= </span><span style="color:#bf616a;">colors</span><span>.</span><span style="color:#96b5b4;">splice</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">1</span><span>, &quot;</span><span style="color:#a3be8c;">red</span><span>&quot;, &quot;</span><span style="color:#a3be8c;">purple</span><span>&quot;); </span><span style="color:#65737e;">// 插入两个值，删除一个元素
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">colors</span><span>); </span><span style="color:#65737e;">// green,red,purple,orange,blue 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">removed</span><span>); </span><span style="color:#65737e;">// yellow，只有一个元素的数组
</span></code></pre>
</li>
</ul>
<h3 id="sou-suo-he-wei-zhi-fang-fa">搜索和位置方法</h3>
<p><strong>ES提供两类搜索数组方法：</strong></p>
<ul>
<li>
<p>严格相等搜索，以下方法都接受两个参数：要查找的元素和一个可选的起始搜索位置。</p>
<ol>
<li>
<p><code>indexOf</code></p>
</li>
<li>
<p><code>lastIndexOf</code></p>
<p><code>indexOf()</code>和 <code>lastIndexOf()</code>都返回要查找的元素在数组中的位置，如果没找到则返回-1。</p>
</li>
<li>
<p><code>includes</code>(<strong>ES7</strong>新增方法)</p>
<p>返回布尔值，表示是否至少找到一个与指定元素匹配的项。在比较第一个参数跟数组每一项时，会使用全等（===）比较，也就是说两项必须严格相等</p>
</li>
</ol>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">numbers </span><span>= [</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">5</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">1</span><span>]; 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">numbers</span><span>.</span><span style="color:#96b5b4;">indexOf</span><span>(</span><span style="color:#d08770;">4</span><span>)); </span><span style="color:#65737e;">// 3 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">numbers</span><span>.</span><span style="color:#96b5b4;">lastIndexOf</span><span>(</span><span style="color:#d08770;">4</span><span>)); </span><span style="color:#65737e;">// 5 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">numbers</span><span>.</span><span style="color:#8fa1b3;">includes</span><span>(</span><span style="color:#d08770;">4</span><span>)); </span><span style="color:#65737e;">// true 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">numbers</span><span>.</span><span style="color:#96b5b4;">indexOf</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">4</span><span>)); </span><span style="color:#65737e;">// 5 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">numbers</span><span>.</span><span style="color:#96b5b4;">lastIndexOf</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">4</span><span>)); </span><span style="color:#65737e;">// 3 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">numbers</span><span>.</span><span style="color:#8fa1b3;">includes</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">7</span><span>)); </span><span style="color:#65737e;">// false 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">person </span><span>= { name: &quot;</span><span style="color:#a3be8c;">Nicholas</span><span>&quot; }; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">people </span><span>= [{ name: &quot;</span><span style="color:#a3be8c;">Nicholas</span><span>&quot; }]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">morePeople </span><span>= [</span><span style="color:#bf616a;">person</span><span>]; 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#96b5b4;">indexOf</span><span>(</span><span style="color:#bf616a;">person</span><span>)); </span><span style="color:#65737e;">// -1 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">morePeople</span><span>.</span><span style="color:#96b5b4;">indexOf</span><span>(</span><span style="color:#bf616a;">person</span><span>)); </span><span style="color:#65737e;">// 0 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#8fa1b3;">includes</span><span>(</span><span style="color:#bf616a;">person</span><span>)); </span><span style="color:#65737e;">// false 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">morePeople</span><span>.</span><span style="color:#8fa1b3;">includes</span><span>(</span><span style="color:#bf616a;">person</span><span>)); </span><span style="color:#65737e;">// true
</span></code></pre>
</li>
<li>
<p>按断言函数搜索</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">people </span><span>= [ 
</span><span>    { 
</span><span>    name: &quot;</span><span style="color:#a3be8c;">Matt</span><span>&quot;, 
</span><span>    age: </span><span style="color:#d08770;">27 
</span><span>    }, 
</span><span>    { 
</span><span>    name: &quot;</span><span style="color:#a3be8c;">Nicholas</span><span>&quot;, 
</span><span>    age: </span><span style="color:#d08770;">29 
</span><span>    } 
</span><span>   ]; 
</span><span>   </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#96b5b4;">find</span><span>((</span><span style="color:#bf616a;">element</span><span>, </span><span style="color:#bf616a;">index</span><span>, </span><span style="color:#bf616a;">array</span><span>) </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">element</span><span>.</span><span style="color:#bf616a;">age </span><span>&lt; </span><span style="color:#d08770;">28</span><span>)); 
</span><span>   </span><span style="color:#65737e;">// {name: &quot;Matt&quot;, age: 27} 
</span><span>   </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#8fa1b3;">findIndex</span><span>((</span><span style="color:#bf616a;">element</span><span>, </span><span style="color:#bf616a;">index</span><span>, </span><span style="color:#bf616a;">array</span><span>) </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">element</span><span>.</span><span style="color:#bf616a;">age </span><span>&lt; </span><span style="color:#d08770;">28</span><span>)); 
</span><span>   </span><span style="color:#65737e;">// 0
</span><span>
</span><span>   </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#96b5b4;">find</span><span>((</span><span style="color:#bf616a;">element</span><span>, </span><span style="color:#bf616a;">index</span><span>, </span><span style="color:#bf616a;">array</span><span>) </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">element</span><span>.</span><span style="color:#bf616a;">age </span><span>== </span><span style="color:#d08770;">28</span><span>));
</span><span>   </span><span style="color:#65737e;">// undefined
</span><span>   </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">people</span><span>.</span><span style="color:#8fa1b3;">findIndex</span><span>((</span><span style="color:#bf616a;">element</span><span>, </span><span style="color:#bf616a;">index</span><span>, </span><span style="color:#bf616a;">array</span><span>) </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">element</span><span>.</span><span style="color:#bf616a;">age </span><span>== </span><span style="color:#d08770;">28</span><span>)); 
</span><span>   </span><span style="color:#65737e;">// -1
</span></code></pre>
</li>
</ul>
<h3 id="die-dai-fang-fa">迭代方法</h3>
<p><strong>ES</strong>为数组定义了5个迭代方法。每个方法接受两个参数：以每一项为参数运行的函数、可选的作为函数运行上下文的作用域对象（调整函数中的<code>this</code>指向）。传递每个方法的函数接受3个参数：数组元素、元素索引和数组本身。</p>
<ul>
<li>
<p><code>every</code></p>
<p>对数组每一项都运行传入的函数，如果对每一项函数都返回 <code>true</code>，则这个方法返回 <code>true</code>。</p>
</li>
<li>
<p><code>filter</code></p>
<p>对数组每一项都运行传入的函数，函数返回 <code>true</code> 的项会组成数组之后返回。</p>
</li>
<li>
<p><code>forEach</code></p>
<p>对数组每一项都运行传入的函数，没有返回值。</p>
</li>
<li>
<p><code>map</code></p>
<p>对数组每一项都运行传入的函数，返回由每次函数调用的结果构成的数组。</p>
</li>
<li>
<p><code>some</code></p>
<p>对数组每一项都运行传入的函数，如果有一项函数返回 <code>true</code>，则这个方法返回 <code>true</code>。这些方法都不改变调用它们的数组。</p>
</li>
</ul>
<h3 id="gui-bing-fang-fa">归并方法</h3>
<p>​	<strong>ES</strong> 为数组提供了两个归并方法：<code>reduce()</code>和 <code>reduceRight()</code>。这两个方法都会迭代数组的所有项，并在此基础上构建一个最终返回值。<code>reduce()</code>方法从数组第一项开始遍历到最后一项。而 <code>reduceRight()</code>从最后一项开始遍历至第一项。</p>
<p>​	这两个方法都接收两个参数：对每一项都会运行的归并函数，以及可选的以之为归并起点的初始值。传给 <code>reduce()</code>和 <code>reduceRight()</code>的函数接收 4 个参数：上一个归并值、当前项、当前项的索引和数组本身。这个函数返回的任何值都会作为下一次调用同一个函数的第一个参数。如果没有给这两个方法传入可选的第二个参数（作为归并起点值），则第一次迭代将从数组的第二项开始，因此传给归并函数的第一个参数是数组的第一项，第二个参数是数组的第二项。</p>
<p>​	可以使用 <code>reduce()</code>函数执行累加数组中所有数值的操作，比如：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">values </span><span>= [</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">5</span><span>]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">sum </span><span>= </span><span style="color:#bf616a;">values</span><span>.</span><span style="color:#8fa1b3;">reduce</span><span>((</span><span style="color:#bf616a;">prev</span><span>, </span><span style="color:#bf616a;">cur</span><span>, </span><span style="color:#bf616a;">index</span><span>, </span><span style="color:#bf616a;">array</span><span>) </span><span style="color:#b48ead;">=&gt; </span><span style="color:#bf616a;">prev </span><span>+ </span><span style="color:#bf616a;">cur</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">sum</span><span>); </span><span style="color:#65737e;">// 15
</span></code></pre>
<p>第一次执行归并函数时，<code>prev</code> 是 1，<code>cur</code> 是 2。第二次执行时，<code>prev</code> 是 3（1 + 2），<code>cur</code> 是 3（数组第三项）。如此递进，直到把所有项都遍历一次，最后返回归并结果。</p>
<p><code>reduceRight()</code>方法与之类似，只是方向相反。来看下面的例子：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">values </span><span>= [</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">5</span><span>]; 
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">sum </span><span>= </span><span style="color:#bf616a;">values</span><span>.</span><span style="color:#8fa1b3;">reduceRight</span><span>(</span><span style="color:#b48ead;">function</span><span>(</span><span style="color:#bf616a;">prev</span><span>, </span><span style="color:#bf616a;">cur</span><span>, </span><span style="color:#bf616a;">index</span><span>, </span><span style="color:#bf616a;">array</span><span>){ 
</span><span> </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">prev </span><span>+ </span><span style="color:#bf616a;">cur</span><span>; 
</span><span>}); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">sum</span><span>); </span><span style="color:#65737e;">// 15
</span></code></pre>
<h2 id="ding-xing-shu-zu">定型数组</h2>
<h3 id="mu-biao">目标</h3>
<p>​	定型数组（Typed Arrays）是为了解决在JavaScript中进行二进制数据处理时所遇到的一些问题而引入的。JavaScript原生的数组虽然非常强大，但在处理二进制数据方面存在一些限制和性能问题。这些问题包括：</p>
<ol>
<li><strong>数据类型问题：</strong> JavaScript中的普通数组是动态类型的，一个数组可以包含不同类型的数据。但在处理二进制数据时，需要确保数据类型的一致性，以避免解释错误的二进制值。</li>
<li><strong>性能问题：</strong> 对于大量的二进制数据，JavaScript数组的处理效率相对较低。因为普通数组是动态的，包含了很多附加信息，而在处理二进制数据时，我们希望能够更紧凑地存储数据。</li>
<li><strong>内存问题：</strong> 普通数组在存储数字时占用较多的内存，因为它们需要支持动态类型和其他功能。对于大型的二进制数据，这可能导致内存占用问题。</li>
</ol>
<p>​	定型数组通过引入固定数据类型和更紧凑的内存表示，解决了这些问题。它们提供了一种高性能的方式来操作和处理二进制数据，特别适用于需要进行低级别的二进制计算、图像处理、音视频编解码等任务。通过定型数组，开发人员可以更直接地访问和操作二进制数据，从而提高性能并减少内存占用。</p>
<p><strong>注意：</strong></p>
<ol>
<li>
<p><code>ArrayBuffer</code>分配的内存不能超过<code>Number.MAX_SAFE_INTEGER</code></p>
<p>即
$$
2^{53}-1
$$</p>
</li>
<li>
<p>声明<code>ArrayBuffer</code>则会将所有二进制位初始化  为0。 </p>
</li>
<li>
<p>声明<code>ArrayBuffer</code>的堆内存可以被当成垃圾回收，不用手动释放。</p>
</li>
</ol>
<p>​	实际上我们无法直接对<code>ArrayBuffer</code>进行内容的读写操作。要读写必须通过视图进行操作。</p>
<h3 id="shi-tu">视图</h3>
<h4 id="dataview">DataView</h4>
<p><code>DataView </code>可以让你以各种不同的数据类型和字节顺序来读取和写入 <code>ArrayBuffer</code> 中的数据，从而更灵活地处理二进制数据。</p>
<p><code>DataView</code> 适用于以下情况：</p>
<ol>
<li><strong>跨数据类型操作：</strong> 如果需要在同一个 ArrayBuffer 中以不同的数据类型进行读写操作，<code>DataView</code> 更适合，因为它可以手动指定数据类型。</li>
<li><strong>精确控制字节顺序：</strong> <code>DataView</code> 允许你指定字节顺序，这在处理与不同机器端序（Big Endian 或 Little Endian）有关的数据时非常有用。</li>
<li><strong>处理定制格式的二进制数据：</strong> 对于一些特殊格式的二进制数据，如网络通信协议、文件格式等，<code>DataView</code> 更容易进行灵活的解析和构建。</li>
</ol>
<p><code>DataView</code>的主要方法：</p>
<ul>
<li>
<p><strong>创建DataView</strong></p>
<p>使用 <code>new DataView(buffer, byteOffset, byteLength)</code> 来创建一个 DataView。<code>buffer</code> 是一个 ArrayBuffer 对象，<code>byteOffset</code> 是从哪个字节开始，<code>byteLength</code> 是要处理的字节数。</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buf </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">16</span><span>); 
</span><span style="color:#65737e;">// DataView 默认使用整个 ArrayBuffer 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">fullDataView </span><span>= new DataView(</span><span style="color:#bf616a;">buf</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">byteOffset</span><span>); </span><span style="color:#65737e;">// 0 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">byteLength</span><span>); </span><span style="color:#65737e;">// 16 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">buffer </span><span>=== </span><span style="color:#bf616a;">buf</span><span>); </span><span style="color:#65737e;">// true
</span></code></pre>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buf </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">16</span><span>); 
</span><span style="color:#65737e;">// DataView 默认使用整个 ArrayBuffer 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">fullDataView </span><span>= new DataView(</span><span style="color:#bf616a;">buf</span><span>,</span><span style="color:#d08770;">1</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">byteOffset</span><span>); </span><span style="color:#65737e;">// 1
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">byteLength</span><span>); </span><span style="color:#65737e;">// 15 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">buffer </span><span>=== </span><span style="color:#bf616a;">buf</span><span>); </span><span style="color:#65737e;">// true
</span></code></pre>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buf </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">16</span><span>); 
</span><span style="color:#65737e;">// DataView 默认使用整个 ArrayBuffer 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">fullDataView </span><span>= new DataView(</span><span style="color:#bf616a;">buf</span><span>,</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">4</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">byteOffset</span><span>); </span><span style="color:#65737e;">// 1
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">byteLength</span><span>); </span><span style="color:#65737e;">// 4 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullDataView</span><span>.</span><span style="color:#bf616a;">buffer </span><span>=== </span><span style="color:#bf616a;">buf</span><span>); </span><span style="color:#65737e;">// true
</span></code></pre>
<ol>
<li>元素类型</li>
</ol>
<table><thead><tr><th>元素类型</th><th>字节</th><th>说明</th><th>等价的C类型</th><th>值范围</th></tr></thead><tbody>
<tr><td>Int8</td><td>1</td><td>8位有符号整数</td><td>signed char</td><td>-128~127</td></tr>
<tr><td>Uint8</td><td>1</td><td>8位无符号整数</td><td>unsigned char</td><td>0~255</td></tr>
<tr><td>Int16</td><td>2</td><td>16位有符号整数</td><td>short</td><td>-32768~32767</td></tr>
<tr><td>Uint16</td><td>2</td><td>16位无符号整数</td><td>unsigned short</td><td>0~65535</td></tr>
<tr><td>Int32</td><td>4</td><td>32位有符号整数</td><td>int</td><td>-2 147 483 648~2 147 483 647</td></tr>
<tr><td>Uint32</td><td>4</td><td>32位无符号整数</td><td>unsigned int</td><td>0~4 294 967 295</td></tr>
<tr><td>Float32</td><td>4</td><td>32位IEEE-754浮点数</td><td>float</td><td>-3.4e+38~+3.4e+38</td></tr>
<tr><td>Float64</td><td>8</td><td>64位IEEE-754浮点数</td><td>double</td><td>-1.7e+308~+1.7e+308</td></tr>
</tbody></table>
</li>
<li>
<p><strong>读写数据</strong></p>
<p><code>DataView</code> 为上表中的每种类型都暴露了 <code>get</code> 和<code> set</code> 方法，这些方法使用 <code>byteOffset</code>（字节偏移量）定位要读取或写入值的位置。</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buf </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">2</span><span>); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">view </span><span>= new DataView(</span><span style="color:#bf616a;">buf</span><span>); 
</span><span style="color:#65737e;">// 说明整个缓冲确实所有二进制位都是 0 
</span><span style="color:#65737e;">// 检查第一个和第二个字符
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt8</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 0 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt8</span><span>(</span><span style="color:#d08770;">1</span><span>)); </span><span style="color:#65737e;">// 0  
</span><span style="color:#65737e;">//使用 setUint8() 方法分别将 buf 中第一个字节和第二个字节设置为 255。在这里，setUint8(0, 255) 和 setUint8(1, 0xFF) 是等效的，因为 0xFF 也是 255 的十进制表示。
</span><span style="color:#65737e;">// 检查整个缓冲
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt16</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 0 使用 view.getInt16(0) 尝试读取第一个字节和第二个字节合并成的 16 位整数。
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setUint8</span><span>(</span><span style="color:#d08770;">0</span><span>,</span><span style="color:#d08770;">255</span><span>);</span><span style="color:#65737e;">//1111111100000000
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt16</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// -256
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setUint8</span><span>(</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">0xFF</span><span>);</span><span style="color:#65737e;">//11111111 11111111
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt16</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// -1
</span></code></pre>
</li>
<li>
<p><strong>字节顺序</strong></p>
<p>“字节序”指的是计算系统维护的一种字节顺序的约定。<code>DataView</code> 只支持两种约定：大端字节序和小端字节序。<code>JavaScript</code> 运行时所在系统的原生字节序决定了如何读取或写入字节，但 <code>DataView</code> 并不遵守这个约定。对一段内存而言，<code>DataView</code> 是一个中立接口，它会遵循你指定的字节序。<code>DataView</code> 的所有<code>API</code>方法都以大端字节序作为默认值，但接收一个可选的布尔值参数，设置为<code> true</code> 即可启用小端字节序。</p>
<ul>
<li>大端字节序也称为“网络字节序”，意思是最高有效位保存在第一个字节，而最低有效位保存在最后一个字节。</li>
<li>小端字节序正好相反，即最低有效位保存在第一个字节，最高有效位保存在最后一个字节。</li>
</ul>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">// 在内存中分配两个字节并声明一个 DataView 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buf </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">2</span><span>); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">view </span><span>= new DataView(</span><span style="color:#bf616a;">buf</span><span>); 
</span><span style="color:#65737e;">// 填充缓冲，让第一位和最后一位都是 1 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setUint8</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0x80</span><span>); </span><span style="color:#65737e;">// 设置最左边的位等于 1 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setUint8</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">0x01</span><span>); </span><span style="color:#65737e;">// 设置最右边的位等于 1 
</span><span style="color:#65737e;">// 缓冲内容（为方便阅读，人为加了空格）
</span><span style="color:#65737e;">// 0x8 0x0 0x0 0x1 
</span><span style="color:#65737e;">// 1000 0000 0000 0001 
</span><span style="color:#65737e;">// 按大端字节序读取 Uint16 
</span><span style="color:#65737e;">// 0x80 是高字节，0x01 是低字节
</span><span style="color:#65737e;">// 0x8001 = 2^15 + 2^0 = 32768 + 1 = 32769 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getUint16</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 32769 
</span><span style="color:#65737e;">// 按小端字节序读取 Uint16 
</span><span style="color:#65737e;">// 0x01 是高字节，0x80 是低字节
</span><span style="color:#65737e;">// 0x0180 = 2^8 + 2^7 = 256 + 128 = 384 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getUint16</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">true</span><span>)); </span><span style="color:#65737e;">// 384 
</span><span style="color:#65737e;">// 按大端字节序写入 Uint16 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setUint16</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0x0004</span><span>); 
</span><span style="color:#65737e;">// 缓冲内容（为方便阅读，人为加了空格）
</span><span style="color:#65737e;">// 0x0 0x0 0x0 0x4 
</span><span style="color:#65737e;">// 0000 0000 0000 0100 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getUint8</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 0 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getUint8</span><span>(</span><span style="color:#d08770;">1</span><span>)); </span><span style="color:#65737e;">// 4 
</span><span style="color:#65737e;">// 按小端字节序写入 Uint16 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setUint16</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">0x0002</span><span>, </span><span style="color:#d08770;">true</span><span>); 
</span><span style="color:#65737e;">// 缓冲内容（为方便阅读，人为加了空格）
</span><span style="color:#65737e;">// 0x0 0x2 0x0 0x0 
</span><span style="color:#65737e;">// 0000 0010 0000 0000 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getUint8</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 2 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getUint8</span><span>(</span><span style="color:#d08770;">1</span><span>)); </span><span style="color:#65737e;">// 0
</span></code></pre>
</li>
<li>
<p><strong>边界情形</strong></p>
<p><code>DataView</code> 完成读、写操作的前提是必须有充足的缓冲区，否则就会抛出 <code>RangeError</code>：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buf </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">6</span><span>); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">view </span><span>= new DataView(</span><span style="color:#bf616a;">buf</span><span>); 
</span><span style="color:#65737e;">// 尝试读取部分超出缓冲范围的值
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt32</span><span>(</span><span style="color:#d08770;">4</span><span>); 
</span><span style="color:#65737e;">// RangeError 
</span><span style="color:#65737e;">// 尝试读取超出缓冲范围的值
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt32</span><span>(</span><span style="color:#d08770;">8</span><span>); 
</span><span style="color:#65737e;">// RangeError 
</span><span style="color:#65737e;">// 尝试读取超出缓冲范围的值
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt32</span><span>(-</span><span style="color:#d08770;">1</span><span>); 
</span><span style="color:#65737e;">// RangeError 
</span><span style="color:#65737e;">// 尝试写入超出缓冲范围的值
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setInt32</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">123</span><span>); 
</span><span style="color:#65737e;">// RangeError
</span></code></pre>
<p><code>DataView</code> 在写入缓冲里会尽最大努力把一个值转换为适当的类型，后备为 0。如果无法转换，则抛出错误：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buf </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">1</span><span>); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">view </span><span>= new DataView(</span><span style="color:#bf616a;">buf</span><span>); 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setInt8</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#d08770;">1.5</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt8</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 1 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setInt8</span><span>(</span><span style="color:#d08770;">0</span><span>, [</span><span style="color:#d08770;">4</span><span>]); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt8</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 4 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setInt8</span><span>(</span><span style="color:#d08770;">0</span><span>, &#39;</span><span style="color:#a3be8c;">f</span><span>&#39;); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">getInt8</span><span>(</span><span style="color:#d08770;">0</span><span>)); </span><span style="color:#65737e;">// 0 
</span><span style="color:#bf616a;">view</span><span>.</span><span style="color:#8fa1b3;">setInt8</span><span>(</span><span style="color:#d08770;">0</span><span>, </span><span style="color:#ebcb8b;">Symbol</span><span>()); 
</span><span style="color:#65737e;">// TypeError
</span></code></pre>
</li>
</ul>
<h3 id="ding-xing-shu-zu-1">定型数组</h3>
<p>JavaScript提供了以下几种类型的定型数组：</p>
<ol>
<li>
<p><code>Int8Array</code>, <code>Uint8Array</code>, <code>Uint8ClampedArray</code>: 8位整数数组，分别表示带符号整数、无符号整数和用于图像处理的无符号整数（值范围在0-255之间）。</p>
</li>
<li>
<p><code>Int16Array</code>, <code>Uint16Array</code>: 16位整数数组，分别表示带符号整数和无符号整数。</p>
</li>
<li>
<p><code>Int32Array</code>, <code>Uint32Array</code>: 32位整数数组，分别表示带符号整数和无符号整数。</p>
</li>
<li>
<p><code>Float32Array</code>, <code>Float64Array</code>: 32位和64位浮点数数组，分别表示单精度和双精度浮点数。</p>
</li>
<li>
<p>如果定型数组没有用任何值初始化，则其关联的缓冲会以 0 填充：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">ints </span><span>= new Int32Array(</span><span style="color:#d08770;">4</span><span>); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>[</span><span style="color:#d08770;">0</span><span>]); </span><span style="color:#65737e;">// 0 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>[</span><span style="color:#d08770;">1</span><span>]); </span><span style="color:#65737e;">// 0 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>[</span><span style="color:#d08770;">2</span><span>]); </span><span style="color:#65737e;">// 0 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">ints</span><span>[</span><span style="color:#d08770;">3</span><span>]); </span><span style="color:#65737e;">// 0
</span></code></pre>
</li>
</ol>
<p>定型数组的构造函数和实例都有一个<code> BYTES_PER_ELEMENT</code> 属性，返回该类型数组中每个元素的大小:</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Int16Array</span><span>.</span><span style="color:#bf616a;">BYTES_PER_ELEMENT</span><span>); </span><span style="color:#65737e;">// 2 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#ebcb8b;">Int32Array</span><span>.</span><span style="color:#bf616a;">BYTES_PER_ELEMENT</span><span>); </span><span style="color:#65737e;">// 4 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">ints </span><span>= new Int32Array(</span><span style="color:#d08770;">1</span><span>), 
</span><span style="color:#bf616a;">floats </span><span>= new Float64Array(</span><span style="color:#d08770;">1</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#bf616a;">BYTES_PER_ELEMENT</span><span>); </span><span style="color:#65737e;">// 4 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">floats</span><span>.</span><span style="color:#bf616a;">BYTES_PER_ELEMENT</span><span>); </span><span style="color:#65737e;">// 8
</span></code></pre>
<p>定型数组方法基本与普通数组一致。其中需要注意的是：</p>
<ul>
<li>
<p>返回新数组的方法也会返回包含同样元素类型（element type）的新定型数组：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">ints </span><span>= new Int16Array([</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>]); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">doubleints </span><span>= </span><span style="color:#bf616a;">ints</span><span>.</span><span style="color:#8fa1b3;">map</span><span>(</span><span style="color:#bf616a;">x </span><span style="color:#b48ead;">=&gt; </span><span style="color:#d08770;">2</span><span>*</span><span style="color:#bf616a;">x</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">doubleints </span><span>instanceof Int16Array); </span><span style="color:#65737e;">// true
</span></code></pre>
</li>
<li>
<p>定型数组有一个 <code>Symbol.iterator</code> 符号属性，因此可以通过 <code>for..of</code> 循环和扩展操作符来操作：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">ints </span><span>= new Int16Array([</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>]); 
</span><span style="color:#b48ead;">for </span><span>(</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">int </span><span>of </span><span style="color:#bf616a;">ints</span><span>) { 
</span><span> </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">int</span><span>); 
</span><span>} 
</span><span style="color:#65737e;">// 1 
</span><span style="color:#65737e;">// 2 
</span><span style="color:#65737e;">// 3 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(Math.</span><span style="color:#96b5b4;">max</span><span>(...</span><span style="color:#bf616a;">ints</span><span>)); </span><span style="color:#65737e;">// 3
</span></code></pre>
</li>
<li>
<p>定型数组同样使用数组缓冲来存储数据，而数组缓冲无法调整大小。因此，下列方法不适用于定型数组：</p>
<ol>
<li><code>concat</code></li>
<li><code>pop</code></li>
<li><code>push</code></li>
<li><code>shift</code></li>
<li><code>splice</code></li>
<li><code>unshift</code></li>
</ol>
</li>
<li>
<p>定型数组也提供了两个新方法，可以快速向外或向内复制数据：</p>
<ol>
<li>
<p><code>set</code></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">// 创建长度为 8 的 int16 数组
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">container </span><span>= new Int16Array(</span><span style="color:#d08770;">8</span><span>); 
</span><span style="color:#65737e;">// 把定型数组复制为前 4 个值
</span><span style="color:#65737e;">// 偏移量默认为索引 0 
</span><span style="color:#bf616a;">container</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#ebcb8b;">Int8Array</span><span>.</span><span style="color:#8fa1b3;">of</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>, </span><span style="color:#d08770;">4</span><span>)); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">container</span><span>); </span><span style="color:#65737e;">// [1,2,3,4,0,0,0,0] 
</span><span style="color:#65737e;">// 把普通数组复制为后 4 个值
</span><span style="color:#65737e;">// 偏移量 4 表示从索引 4 开始插入
</span><span style="color:#bf616a;">container</span><span>.</span><span style="color:#96b5b4;">set</span><span>([</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">6</span><span>,</span><span style="color:#d08770;">7</span><span>,</span><span style="color:#d08770;">8</span><span>], </span><span style="color:#d08770;">4</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">container</span><span>); </span><span style="color:#65737e;">// [1,2,3,4,5,6,7,8] 
</span><span style="color:#65737e;">// 溢出会抛出错误
</span><span style="color:#bf616a;">container</span><span>.</span><span style="color:#96b5b4;">set</span><span>([</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">6</span><span>,</span><span style="color:#d08770;">7</span><span>,</span><span style="color:#d08770;">8</span><span>], </span><span style="color:#d08770;">7</span><span>); 
</span><span style="color:#65737e;">// RangeError
</span></code></pre>
</li>
<li>
<p><code>subarray</code></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">source </span><span>= </span><span style="color:#ebcb8b;">Int16Array</span><span>.</span><span style="color:#8fa1b3;">of</span><span>(</span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">6</span><span>, </span><span style="color:#d08770;">8</span><span>); 
</span><span style="color:#65737e;">// 把整个数组复制为一个同类型的新数组
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">fullCopy </span><span>= </span><span style="color:#bf616a;">source</span><span>.</span><span style="color:#8fa1b3;">subarray</span><span>(); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">fullCopy</span><span>); </span><span style="color:#65737e;">// [2, 4, 6, 8] 
</span><span style="color:#65737e;">// 从索引 2 开始复制数组
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">halfCopy </span><span>= </span><span style="color:#bf616a;">source</span><span>.</span><span style="color:#8fa1b3;">subarray</span><span>(</span><span style="color:#d08770;">2</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">halfCopy</span><span>); </span><span style="color:#65737e;">// [6, 8] 
</span><span style="color:#65737e;">// 从索引 1 开始复制到索引 3 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">partialCopy </span><span>= </span><span style="color:#bf616a;">source</span><span>.</span><span style="color:#8fa1b3;">subarray</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">3</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">partialCopy</span><span>); </span><span style="color:#65737e;">// [4, 6]
</span></code></pre>
</li>
</ol>
</li>
<li>
<p>定型数组没有原生的拼接能力，但使用定型数组 API 提供的很多工具可以手动构建：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">// 第一个参数是应该返回的数组类型 
</span><span style="color:#65737e;">// 其余参数是应该拼接在一起的定型数组
</span><span style="color:#b48ead;">function </span><span style="color:#8fa1b3;">typedArrayConcat</span><span>(</span><span style="color:#bf616a;">typedArrayConstructor</span><span>, ...</span><span style="color:#bf616a;">typedArrays</span><span>) { 
</span><span> </span><span style="color:#65737e;">// 计算所有数组中包含的元素总数
</span><span> </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">numElements </span><span>= </span><span style="color:#bf616a;">typedArrays</span><span>.</span><span style="color:#8fa1b3;">reduce</span><span>((</span><span style="color:#bf616a;">x</span><span>,</span><span style="color:#bf616a;">y</span><span>) </span><span style="color:#b48ead;">=&gt; </span><span>(</span><span style="color:#bf616a;">x</span><span>.length || </span><span style="color:#bf616a;">x</span><span>) + </span><span style="color:#bf616a;">y</span><span>.length); 
</span><span> </span><span style="color:#65737e;">// 按照提供的类型创建一个数组，为所有元素留出空间
</span><span> </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">resultArray </span><span>= new typedArrayConstructor(</span><span style="color:#bf616a;">numElements</span><span>); 
</span><span> </span><span style="color:#65737e;">// 依次转移数组
</span><span> </span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">currentOffset </span><span>= </span><span style="color:#d08770;">0</span><span>; 
</span><span> </span><span style="color:#bf616a;">typedArrays</span><span>.</span><span style="color:#8fa1b3;">map</span><span>(</span><span style="color:#bf616a;">x </span><span style="color:#b48ead;">=&gt; </span><span>{ 
</span><span> </span><span style="color:#bf616a;">resultArray</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">x</span><span>, </span><span style="color:#bf616a;">currentOffset</span><span>); 
</span><span> </span><span style="color:#bf616a;">currentOffset </span><span>+= </span><span style="color:#bf616a;">x</span><span>.length; 
</span><span> }); 
</span><span> </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">resultArray</span><span>; 
</span><span>} 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">concatArray </span><span>= </span><span style="color:#8fa1b3;">typedArrayConcat</span><span>(</span><span style="color:#ebcb8b;">Int32Array</span><span>, 
</span><span> </span><span style="color:#ebcb8b;">Int8Array</span><span>.</span><span style="color:#8fa1b3;">of</span><span>(</span><span style="color:#d08770;">1</span><span>, </span><span style="color:#d08770;">2</span><span>, </span><span style="color:#d08770;">3</span><span>), 
</span><span> </span><span style="color:#ebcb8b;">Int16Array</span><span>.</span><span style="color:#8fa1b3;">of</span><span>(</span><span style="color:#d08770;">4</span><span>, </span><span style="color:#d08770;">5</span><span>, </span><span style="color:#d08770;">6</span><span>), 
</span><span> </span><span style="color:#ebcb8b;">Float32Array</span><span>.</span><span style="color:#8fa1b3;">of</span><span>(</span><span style="color:#d08770;">7</span><span>, </span><span style="color:#d08770;">8</span><span>, </span><span style="color:#d08770;">9</span><span>)); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">concatArray</span><span>); </span><span style="color:#65737e;">// [1, 2, 3, 4, 5, 6, 7, 8, 9] 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">concatArray </span><span>instanceof Int32Array); </span><span style="color:#65737e;">// true
</span></code></pre>
</li>
<li>
<p><strong>下溢和上溢</strong></p>
<p>定型数组中值的下溢和上溢不会影响到其他索引，但仍然需要考虑数组的元素应该是什么类型。定型数组对于可以存储的每个索引只接受一个相关位，而不考虑它们对实际数值的影响。以下代码演示了如何处理下溢和上溢：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">// 长度为 2 的有符号整数数组
</span><span style="color:#65737e;">// 每个索引保存一个二补数形式的有符号整数
</span><span style="color:#65737e;">// 范围是-128（-1 * 2^7）~127（2^7 - 1）
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">ints </span><span>= new Int8Array(</span><span style="color:#d08770;">2</span><span>); 
</span><span style="color:#65737e;">// 长度为 2 的无符号整数数组
</span><span style="color:#65737e;">// 每个索引保存一个无符号整数
</span><span style="color:#65737e;">// 范围是 0~255（2^7 - 1）
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">unsignedInts </span><span>= new Uint8Array(</span><span style="color:#d08770;">2</span><span>); 
</span><span style="color:#65737e;">// 上溢的位不会影响相邻索引
</span><span style="color:#65737e;">// 索引只取最低有效位上的 8 位
</span><span style="color:#bf616a;">unsignedInts</span><span>[</span><span style="color:#d08770;">1</span><span>] = </span><span style="color:#d08770;">256</span><span>; </span><span style="color:#65737e;">// 0x100 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">unsignedInts</span><span>); </span><span style="color:#65737e;">// [0, 0] 
</span><span style="color:#bf616a;">unsignedInts</span><span>[</span><span style="color:#d08770;">1</span><span>] = </span><span style="color:#d08770;">511</span><span>; </span><span style="color:#65737e;">// 0x1FF 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">unsignedInts</span><span>); </span><span style="color:#65737e;">// [0, 255] 
</span><span style="color:#65737e;">// 下溢的位会被转换为其无符号的等价值
</span><span style="color:#65737e;">// 0xFF 是以二补数形式表示的-1（截取到 8 位）, 
</span><span style="color:#65737e;">// 但 255 是一个无符号整数
</span><span style="color:#bf616a;">unsignedInts</span><span>[</span><span style="color:#d08770;">1</span><span>] = -</span><span style="color:#d08770;">1 </span><span style="color:#65737e;">// 0xFF (truncated to 8 bits) 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">unsignedInts</span><span>); </span><span style="color:#65737e;">// [0, 255] 
</span><span style="color:#65737e;">// 上溢自动变成二补数形式
</span><span style="color:#65737e;">// 0x80 是无符号整数的 128，是二补数形式的-128 
</span><span style="color:#bf616a;">ints</span><span>[</span><span style="color:#d08770;">1</span><span>] = </span><span style="color:#d08770;">128</span><span>; </span><span style="color:#65737e;">// 0x80 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, -128] 
</span><span style="color:#65737e;">// 下溢自动变成二补数形式
</span><span style="color:#65737e;">// 0xFF 是无符号整数的 255，是二补数形式的-1 
</span><span style="color:#bf616a;">ints</span><span>[</span><span style="color:#d08770;">1</span><span>] = </span><span style="color:#d08770;">255</span><span>; </span><span style="color:#65737e;">// 0xFF 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">ints</span><span>); </span><span style="color:#65737e;">// [0, -1]
</span></code></pre>
</li>
<li>
<p>除了 8 种元素类型，还有一种“夹板”数组类型：<code>Uint8ClampedArray</code>，不允许任何方向溢出。超出最大值 255 的值会被向下舍入为 255，而小于最小值 0 的值会被向上舍入为 0。</p>
</li>
</ul>
<p>定型数组的简单例子</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#65737e;">// 创建一个大小为 16 字节的 ArrayBuffer
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">buffer </span><span>= new ArrayBuffer(</span><span style="color:#d08770;">16</span><span>);
</span><span>
</span><span style="color:#65737e;">// 创建一个 Int32Array 视图，表示整个 ArrayBuffer
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">intArray </span><span>= new Int32Array(</span><span style="color:#bf616a;">buffer</span><span>);
</span><span>
</span><span style="color:#65737e;">// 在 Int32Array 中设置值
</span><span style="color:#bf616a;">intArray</span><span>[</span><span style="color:#d08770;">0</span><span>] = </span><span style="color:#d08770;">42</span><span>;
</span><span style="color:#bf616a;">intArray</span><span>[</span><span style="color:#d08770;">3</span><span>] = </span><span style="color:#d08770;">36</span><span>;
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">intArray</span><span>);</span><span style="color:#65737e;">//Int32Array(4) [42, 0, 0, 36, buffer: ArrayBuffer(16), byteLength: 16, byteOffset: 0, length: 4]
</span><span>
</span><span>
</span><span style="color:#65737e;">// 创建一个 Uint8Array 视图，表示 ArrayBuffer 中的一部分
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">byteView </span><span>= new Uint8Array(</span><span style="color:#bf616a;">buffer</span><span>); </span><span style="color:#65737e;">// 从第 8 个字节开始，长度为 4 字节
</span><span>
</span><span style="color:#65737e;">// 在 Uint8Array 中查看数据
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">byteView</span><span>); </span><span style="color:#65737e;">// Uint8Array(16) [42, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 36, 0, 0, 0, buffer: ArrayBuffer(16), byteLength: 16, byteOffset: 0, length: 16]
</span></code></pre>
<ul>
<li><code>Int32Array</code>：每个成员占据 4 个字节，所以在一个 16 字节的 <code>ArrayBuffer</code> 中，只能容纳 16 / 4 = 4 个 <code>Int32</code> 类型的成员。</li>
<li><code>Uint8Array</code>：每个成员占据 1 个字节，所以在一个 16 字节的 <code>ArrayBuffer</code> 中，可以容纳 16 个 <code>Uint8</code> 类型的成员。</li>
</ul>
<h2 id="map"><em><strong>Map</strong></em></h2>
<p><strong>ES6新特性：<strong>键值对类型</strong><em>Map</em></strong></p>
<ol>
<li>
<p>创建映射<em><strong>Map</strong></em>，<code>size</code>属性代表映射大小</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">let </span><span style="color:#bf616a;">m </span><span>= new Map();
</span><span style="color:#65737e;">// m = 1;
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">arr </span><span>= [</span><span style="color:#d08770;">1</span><span>,</span><span style="color:#d08770;">4</span><span>,</span><span style="color:#d08770;">5</span><span>,</span><span style="color:#d08770;">6</span><span>];
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">m1 </span><span>= new Map([
</span><span>    [&#39;</span><span style="color:#a3be8c;">a</span><span>&#39;,</span><span style="color:#d08770;">1</span><span>],
</span><span>    [&#39;</span><span style="color:#a3be8c;">b</span><span>&#39;,</span><span style="color:#d08770;">2</span><span>]
</span><span>]);
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">m2 </span><span>= new Map(</span><span style="color:#bf616a;">arr</span><span>.</span><span style="color:#96b5b4;">entries</span><span>());
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m1</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m2</span><span>);
</span><span style="color:#65737e;">//Map(0) {size: 0}
</span><span style="color:#65737e;">//Map(2) {size: 2, a =&gt; 1, b =&gt; 2} 
</span><span style="color:#65737e;">//Map(4) {size: 4, 0 =&gt; 1, 1 =&gt; 4, 2 =&gt; 5, 3 =&gt; 6}
</span><span>
</span><span>
</span></code></pre>
</li>
<li>
<p><code>set</code>方法</p>
<p><strong>注意：map类型的键、值可以是任意js数据类型，而object只能是数字、字符串和下划线</strong></p>
<pre data-lang="javascript" style="background-color:#2b303b;color:#c0c5ce;" class="language-javascript "><code class="language-javascript" data-lang="javascript"><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">m1</span><span>,</span><span style="color:#bf616a;">m2</span><span>);
</span><span style="color:#b48ead;">let </span><span style="color:#8fa1b3;">a </span><span>= </span><span style="color:#b48ead;">function</span><span>(){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#d08770;">1</span><span>)
</span><span>};
</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#b48ead;">function</span><span>(){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#d08770;">1</span><span>)
</span><span>},</span><span style="color:#bf616a;">arr</span><span>);
</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">a</span><span>,</span><span style="color:#bf616a;">arr</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m</span><span>);
</span><span style="color:#65737e;">//Map(3) {size: 3, Map(2) {…} =&gt; Map(4) {…}, ƒ () =&gt; (4) [1, 4, 5, 6, …], ƒ () =&gt; (4) [1, 4, 5, 6, …]}
</span><span>
</span></code></pre>
</li>
<li>
<p><code>get</code>取值方法</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span>
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">m1</span><span>));
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#b48ead;">function</span><span>(){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#d08770;">1</span><span>)
</span><span>}));
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">a</span><span>));
</span><span>
</span><span style="color:#65737e;">//Map(4) {size: 4, 0 =&gt; 1, 1 =&gt; 4, 2 =&gt; 5, 3 =&gt; 6}
</span><span>
</span><span style="color:#65737e;">//undefined
</span><span>
</span><span style="color:#65737e;">//(4) [1, 4, 5, 6]
</span></code></pre>
<p><strong>注意：键或者值的内部属性、属性值发生变化时，不会影响原本的映射关系例如：</strong></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#bf616a;">arr </span><span>= [</span><span style="color:#d08770;">7</span><span>,</span><span style="color:#d08770;">8</span><span>,</span><span style="color:#d08770;">9</span><span>];
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">a</span><span>));
</span><span style="color:#bf616a;">m1</span><span>.</span><span style="color:#96b5b4;">delete</span><span>(&#39;</span><span style="color:#a3be8c;">a</span><span>&#39;);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">m1</span><span>,</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">m1</span><span>));
</span><span style="color:#65737e;">//(4) [1, 4, 5, 6]
</span><span>
</span><span style="color:#65737e;">//Map(1) {size: 1, b =&gt; 2} Map(4) {size: 4, 0 =&gt; 1, 1 =&gt; 4, 2 =&gt; 5, 3 =&gt; 6}
</span></code></pre>
</li>
<li>
<p><code>delete</code>删除方法。传入对应的键，删除指定键值对。</p>
</li>
<li>
<p><code>clear</code>清空方法。清空<code>map</code>中所有的键值对。</p>
<p><strong>注意：Map 内部使用 SameValueZero 比较操作（ECMAScript 规范内部定义，语言中不能使用），基本上相当于使用严格对象相等的标准来检查键的匹配性，SameValueZero 比较也可能导致意想不到的冲突：</strong></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">m </span><span>= new Map(); 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">a </span><span>= </span><span style="color:#d08770;">0</span><span>/&quot;&quot;, </span><span style="color:#65737e;">// NaN 
</span><span> </span><span style="color:#bf616a;">b </span><span>= </span><span style="color:#d08770;">0</span><span>/&quot;&quot;, </span><span style="color:#65737e;">// NaN 
</span><span> </span><span style="color:#bf616a;">pz </span><span>= +</span><span style="color:#d08770;">0</span><span>, 
</span><span> </span><span style="color:#bf616a;">nz </span><span>= -</span><span style="color:#d08770;">0</span><span>; 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">a </span><span>=== </span><span style="color:#bf616a;">b</span><span>); </span><span style="color:#65737e;">// false 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">pz </span><span>=== </span><span style="color:#bf616a;">nz</span><span>); </span><span style="color:#65737e;">// true 
</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">a</span><span>, &quot;</span><span style="color:#a3be8c;">foo</span><span>&quot;); 
</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">pz</span><span>, &quot;</span><span style="color:#a3be8c;">bar</span><span>&quot;); 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">b</span><span>)); </span><span style="color:#65737e;">// foo 
</span><span style="color:#8fa1b3;">alert</span><span>(</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">nz</span><span>)); </span><span style="color:#65737e;">// bar
</span></code></pre>
</li>
</ol>
<h3 id="shun-xu-yu-die-dai"><strong>顺序与迭代</strong></h3>
<p><code>Map</code>实例与<code>Object</code>实例主要差异是：</p>
<p><code>Map</code>实例会维护键值对插入顺序，因此可以根据插入顺序执行迭代操作。</p>
<p><code>Map</code>同样拥有三个迭代器<code>keys</code>、<code>values</code>、<code>entries</code>，顺序与插入顺序保持一致。</p>
<h3 id="map-vs-object"><strong>Map vs Object</strong></h3>
<ol>
<li>
<p><strong>内存占用：</strong></p>
<p><code>Object</code> 和<code> Map</code> 的工程级实现在不同浏览器间存在明显差异，但存储单个键/值对所占用的内存数量都会随键的数量线性增加。批量添加或删除键/值对则取决于各浏览器对该类型内存分配的工程实现。不同浏览器的情况不同，但给定固定大小的内存，<code>Map</code> 大约可以比 <code>Object</code> 多存储 50%的键/值对</p>
</li>
<li>
<p><strong>插入性能：</strong></p>
<p><code>Object</code>和<code>Map</code>中插入新键/值对的消耗大致相当，不过插入 Map 在所有浏览器中一般会稍微快一点儿。对这两个类型来说，插入速度并不会随着键/值对数量而线性增加。如果代码涉及大量插入操作，那么显然 Map 的性能更佳。</p>
</li>
<li>
<p><strong>查找速度：</strong></p>
<p>与插入不同，从大型<code>Object</code> 和 <code>Map</code> 中查找键/值对的性能差异极小，但如果只包含少量键/值对，则 <code>Object</code> 有时候速度更快。在把 <code>Object</code> 当成数组使用的情况下（比如使用连续整数作为属性），浏览器引擎可以进行优化，在内存中使用更高效的布局。这对 <code>Map</code> 来说是不可能的。对这两个类型而言，查找速度不会随着键/值对数量增加而线性增加。如果代码涉及大量查找操作，那么某些情况下可能选择 <code>Object</code> 更好一些。</p>
</li>
<li>
<p><strong>删除性能：</strong></p>
<p>使用 <code>delete</code> 删除 <code>Object</code> 属性的性能一直以来饱受诟病，目前在很多浏览器中仍然如此。为此，出现了一些伪删除对象属性的操作，包括把属性值设置为 <code>undefined</code> 或 <code>null</code>。但很多时候，这都是一种讨厌的或不适宜的折中。而对大多数浏览器引擎来说，<code>Map</code> 的 <code>delete()</code>操作都比插入和查找更快。如果代码涉及大量删除操作，那么毫无疑问应该选择 <code>Map</code>。</p>
</li>
</ol>
<p><strong>综上所述：</strong></p>
<p>大部分应用场景下可以优先使用<code>Map</code>类型，但作为长期支持的原始类型<code>Object</code>可以用于底层应用开发。</p>
<h2 id="weakmap"><em><strong>WeakMap</strong></em></h2>
<p><strong>注意：弱映射中的键只能是<code>Object</code>或者继承自<code>Object</code>的子类（<code>null</code>除外）尝试使用非对象设置键会抛出<code>TypeError</code>。值的类型没有限制。</strong></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">key1 </span><span>= {
</span><span>    id:</span><span style="color:#d08770;">1
</span><span>},</span><span style="color:#bf616a;">key2 </span><span>= {
</span><span>    id:</span><span style="color:#d08770;">2
</span><span>},</span><span style="color:#bf616a;">key3 </span><span>= {
</span><span>    id:</span><span style="color:#d08770;">3
</span><span>};
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">wm </span><span>= new WeakMap([
</span><span>    [</span><span style="color:#bf616a;">key1</span><span>,{
</span><span>        test_fst:</span><span style="color:#d08770;">1
</span><span>    }],
</span><span>    [</span><span style="color:#bf616a;">key2</span><span>,{
</span><span>        test_sec:</span><span style="color:#d08770;">2
</span><span>    }]
</span><span>]);
</span><span>
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>);
</span><span style="color:#65737e;">//WeakMap {{id: 2} =&gt; {test_sec: 2}, {id: 1} =&gt; {test_fst: 1}}
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">key1</span><span>));
</span><span style="color:#65737e;">//{test_fst: 1}
</span><span>
</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">key3</span><span>,{
</span><span>    test_trd:</span><span style="color:#d08770;">3
</span><span>});
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>);
</span><span style="color:#65737e;">//WeakMap {{id: 2} =&gt; {test_sec: 2}, {id: 3} =&gt; {test_trd: 3}, {…} =&gt; {test_fst: 1}}
</span><span>
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">has</span><span>(</span><span style="color:#bf616a;">key3</span><span>));
</span><span style="color:#65737e;">//true
</span><span>
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">key3</span><span>));
</span><span style="color:#65737e;">//{test_trd: 3}
</span><span>
</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">delete</span><span>(</span><span style="color:#bf616a;">key3</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">has</span><span>(</span><span style="color:#bf616a;">key3</span><span>));
</span><span style="color:#65737e;">//false
</span><span>
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">key3</span><span>));
</span><span style="color:#65737e;">//undefined
</span></code></pre>
<p><code>WeakMap</code> 中<code>weak</code>表示弱映射的键是“弱弱地拿着”的。意思就是，这些键不属于正式的引用，不会阻止垃圾回收。进一步理解就是说，如果一个对象作为 <code>WeakMap</code> 的键，而且没有其他的引用指向这个对象，那么在下一次垃圾回收时，这个键值对将会被自动移除，从而释放内存。</p>
<p><strong>注意：<code>WeakMap</code>不能遍历，方法同 <code>get</code>、<code>set</code>、<code>has</code>、<code>delete</code></strong></p>
<p>综上<code>Map</code>和<code>WeakMap</code>的区别：</p>
<ul>
<li><code>Map</code>和<code>WeakMap</code>本质上都是键值对集合，前者的键和值都没有限制，而后者的键必须是<code>object</code>类型或者继承自<code>object</code>的类型其中又除去<code>null</code>类型</li>
<li><code>WeakMap</code>的键不会阻止键对象被垃圾回收，<code>Map</code>的键会阻止键对象被垃圾回收。</li>
<li><code>WeakMap</code>不支持迭代方法，<code>Map</code>支持迭代方法。</li>
</ul>
<h3 id="ruo-ying-she-de-ying-yong">弱映射的应用</h3>
<ol>
<li>
<p>私有变量</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">wm </span><span>= new WeakMap(); 
</span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">User </span><span style="color:#eff1f5;">{ 
</span><span style="color:#eff1f5;"> </span><span style="color:#b48ead;">constructor</span><span>(</span><span style="color:#bf616a;">id</span><span>) </span><span style="color:#eff1f5;">{ 
</span><span style="color:#eff1f5;"> </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">idProperty </span><span>= </span><span style="color:#ebcb8b;">Symbol</span><span style="color:#eff1f5;">(</span><span>&#39;</span><span style="color:#a3be8c;">id</span><span>&#39;</span><span style="color:#eff1f5;">); 
</span><span style="color:#eff1f5;"> </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">setId</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">); 
</span><span style="color:#eff1f5;"> } 
</span><span style="color:#eff1f5;"> </span><span style="color:#8fa1b3;">setPrivate</span><span>(</span><span style="color:#bf616a;">property</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">value</span><span>) </span><span style="color:#eff1f5;">{ 
</span><span style="color:#eff1f5;"> </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">privateMembers </span><span>= </span><span style="color:#bf616a;">wm</span><span style="color:#eff1f5;">.</span><span style="color:#96b5b4;">get</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">) </span><span>|| </span><span style="color:#eff1f5;">{}; 
</span><span style="color:#eff1f5;"> </span><span style="color:#bf616a;">privateMembers</span><span style="color:#eff1f5;">[</span><span style="color:#bf616a;">property</span><span style="color:#eff1f5;">] </span><span>= </span><span style="color:#bf616a;">value</span><span style="color:#eff1f5;">; 
</span><span style="color:#eff1f5;"> </span><span style="color:#bf616a;">wm</span><span style="color:#eff1f5;">.</span><span style="color:#96b5b4;">set</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">privateMembers</span><span style="color:#eff1f5;">); 
</span><span style="color:#eff1f5;"> } 
</span><span style="color:#eff1f5;"> </span><span style="color:#8fa1b3;">getPrivate</span><span>(</span><span style="color:#bf616a;">property</span><span>) </span><span style="color:#eff1f5;">{ 
</span><span style="color:#eff1f5;"> </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">wm</span><span style="color:#eff1f5;">.</span><span style="color:#96b5b4;">get</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">)[</span><span style="color:#bf616a;">property</span><span style="color:#eff1f5;">]; 
</span><span style="color:#eff1f5;"> } 
</span><span style="color:#eff1f5;"> </span><span style="color:#8fa1b3;">setId</span><span>(</span><span style="color:#bf616a;">id</span><span>) </span><span style="color:#eff1f5;">{ 
</span><span style="color:#eff1f5;"> </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">setPrivate</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">idProperty</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">); 
</span><span style="color:#eff1f5;"> } 
</span><span style="color:#eff1f5;"> </span><span style="color:#8fa1b3;">getId</span><span>() </span><span style="color:#eff1f5;">{ 
</span><span style="color:#eff1f5;"> </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">getPrivate</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">idProperty</span><span style="color:#eff1f5;">); 
</span><span style="color:#eff1f5;"> } 
</span><span style="color:#eff1f5;">} 
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">user </span><span>= new User(</span><span style="color:#d08770;">123</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">user</span><span>.</span><span style="color:#8fa1b3;">getId</span><span>()); </span><span style="color:#65737e;">// 123 
</span><span style="color:#bf616a;">user</span><span>.</span><span style="color:#8fa1b3;">setId</span><span>(</span><span style="color:#d08770;">456</span><span>); 
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">user</span><span>.</span><span style="color:#8fa1b3;">getId</span><span>()); </span><span style="color:#65737e;">// 456 
</span><span style="color:#65737e;">// 并不是真正私有的
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">get</span><span>(</span><span style="color:#bf616a;">user</span><span>)[</span><span style="color:#bf616a;">user</span><span>.</span><span style="color:#bf616a;">idProperty</span><span>]); </span><span style="color:#65737e;">// 456
</span></code></pre>
<p>对于上面的实现，外部代码只需要拿到对象实例的引用和弱映射，就可以取得“私有”变量了。为了避免这种访问，可以用一个闭包把 WeakMap 包装起来，这样就可以把弱映射与外界完全隔离开了：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">User </span><span>= (() </span><span style="color:#b48ead;">=&gt; </span><span>{
</span><span>    </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">wm </span><span>= new WeakMap();
</span><span>    </span><span style="color:#b48ead;">class </span><span style="color:#ebcb8b;">User </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">        </span><span style="color:#b48ead;">constructor</span><span>(</span><span style="color:#bf616a;">id</span><span>) </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">idProperty </span><span>= </span><span style="color:#ebcb8b;">Symbol</span><span style="color:#eff1f5;">(</span><span>&#39;</span><span style="color:#a3be8c;">id</span><span>&#39;</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">setId</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">        </span><span style="color:#8fa1b3;">setPrivate</span><span>(</span><span style="color:#bf616a;">property</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">value</span><span>) </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">            </span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">privateMembers </span><span>= </span><span style="color:#bf616a;">wm</span><span style="color:#eff1f5;">.</span><span style="color:#96b5b4;">get</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">) </span><span>|| </span><span style="color:#eff1f5;">{};
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">privateMembers</span><span style="color:#eff1f5;">[</span><span style="color:#bf616a;">property</span><span style="color:#eff1f5;">] </span><span>= </span><span style="color:#bf616a;">value</span><span style="color:#eff1f5;">;
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">wm</span><span style="color:#eff1f5;">.</span><span style="color:#96b5b4;">set</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">privateMembers</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">        </span><span style="color:#8fa1b3;">getPrivate</span><span>(</span><span style="color:#bf616a;">property</span><span>) </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">wm</span><span style="color:#eff1f5;">.</span><span style="color:#96b5b4;">get</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">)[</span><span style="color:#bf616a;">property</span><span style="color:#eff1f5;">];
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">        </span><span style="color:#8fa1b3;">setId</span><span>(</span><span style="color:#bf616a;">id</span><span>) </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">            </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">setPrivate</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">idProperty</span><span style="color:#eff1f5;">, </span><span style="color:#bf616a;">id</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">        </span><span style="color:#8fa1b3;">getId</span><span>(</span><span style="color:#bf616a;">id</span><span>) </span><span style="color:#eff1f5;">{
</span><span style="color:#eff1f5;">            </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#8fa1b3;">getPrivate</span><span style="color:#eff1f5;">(</span><span style="color:#bf616a;">this</span><span style="color:#eff1f5;">.</span><span style="color:#bf616a;">idProperty</span><span style="color:#eff1f5;">);
</span><span style="color:#eff1f5;">        }
</span><span style="color:#eff1f5;">    }
</span><span>    </span><span style="color:#b48ead;">return </span><span style="color:#bf616a;">User</span><span>;
</span><span>})();
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">user </span><span>= new User(</span><span style="color:#d08770;">123</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">user</span><span>.</span><span style="color:#8fa1b3;">getId</span><span>()); </span><span style="color:#65737e;">// 123 
</span><span style="color:#bf616a;">user</span><span>.</span><span style="color:#8fa1b3;">setId</span><span>(</span><span style="color:#d08770;">456</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">user</span><span>.</span><span style="color:#8fa1b3;">getId</span><span>()); </span><span style="color:#65737e;">// 456
</span></code></pre>
</li>
<li>
<p><strong>dom</strong>节点元数据</p>
<p>因为<code> WeakMap</code> 实例不会妨碍垃圾回收，所以非常适合保存关联元数据。来看下面这个例子，其中使用了常规的 <code>Map</code>：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">m </span><span>= new Map(); 
</span><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">loginButton </span><span>= document.</span><span style="color:#96b5b4;">querySelector</span><span>(&#39;</span><span style="color:#a3be8c;">#login</span><span>&#39;); 
</span><span>
</span><span style="color:#65737e;">// 给这个节点关联一些元数据
</span><span>
</span><span style="color:#bf616a;">m</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">loginButton</span><span>, {disabled: </span><span style="color:#d08770;">true</span><span>}); 
</span></code></pre>
<p>假设在上面的代码执行后，页面被 <code>JavaScript</code> 改变了，原来的登录按钮从 <code>DOM </code>树中被删掉了。但由于映射中还保存着按钮的引用，所以对应的 <code>DOM</code> 节点仍然会逗留在内存中，除非明确将其从映射中</p>
<p>删除或者等到映射本身被销毁。如果这里使用的是弱映射，如以下代码所示，那么当节点从<code> DOM</code> 树中被删除后，垃圾回收程序就</p>
<p>可以立即释放其内存（假设没有其他地方引用这个对象）：</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">wm </span><span>= new WeakMap(); 
</span><span>
</span><span style="color:#b48ead;">const </span><span style="color:#bf616a;">loginButton </span><span>= document.</span><span style="color:#96b5b4;">querySelector</span><span>(&#39;</span><span style="color:#a3be8c;">#login</span><span>&#39;); 
</span><span style="color:#65737e;">// 给这个节点关联一些元数据
</span><span style="color:#bf616a;">wm</span><span>.</span><span style="color:#96b5b4;">set</span><span>(</span><span style="color:#bf616a;">loginButton</span><span>, {disabled: </span><span style="color:#d08770;">true</span><span>}); 
</span></code></pre>
</li>
</ol>
<h2 id="set"><em><strong>Set</strong></em></h2>
<p><strong>ECMAScript 6</strong>新增的<code> Set</code> 是一种新集合类型，为这门语言带来集合数据结构。<code>Set</code> 在很多方面都像是加强的<code> Map</code>，这是因为它们的大多数 <strong>API</strong> 和行为都是共有的。<code>Set </code>可以包含任何 JavaScript 数据类型作为值</p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">s </span><span>= new Set();
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">obj_zero </span><span>= {
</span><span>    id:</span><span style="color:#d08770;">0
</span><span>},</span><span style="color:#bf616a;">obj_fst </span><span>= {
</span><span>    id:</span><span style="color:#d08770;">1
</span><span>};
</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">add</span><span>(</span><span style="color:#bf616a;">obj_zero</span><span>).</span><span style="color:#96b5b4;">add</span><span>(</span><span style="color:#bf616a;">obj_fst</span><span>).</span><span style="color:#96b5b4;">add</span><span>({
</span><span>    id:</span><span style="color:#d08770;">3
</span><span>});
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">s</span><span>);
</span><span style="color:#65737e;">//Set(3) {size: 3, {id: 0}, {id: 1}, {id: 3}}
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">size:</span><span>&quot;,</span><span style="color:#bf616a;">s</span><span>.size);
</span><span style="color:#65737e;">//size: 3
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">Has obj_first: </span><span>&quot;,</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">has</span><span>(</span><span style="color:#bf616a;">obj_fst</span><span>));
</span><span style="color:#65737e;">//Has obj_first:  true
</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">delete</span><span>({
</span><span>    id:</span><span style="color:#d08770;">3
</span><span>});
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">After delete: </span><span>&quot;,</span><span style="color:#bf616a;">s</span><span>);
</span><span style="color:#65737e;">//After delete:  Set(3) {size: 3, {id: 0}, {id: 1}, {id: 3}}
</span><span>
</span><span style="color:#b48ead;">var </span><span style="color:#bf616a;">third</span><span>;
</span><span style="color:#b48ead;">for</span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">i </span><span>of </span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">keys</span><span>()){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">i</span><span>)
</span><span>    </span><span style="color:#bf616a;">third </span><span>= </span><span style="color:#bf616a;">i</span><span>;
</span><span>}
</span><span style="color:#65737e;">//{id: 0}
</span><span style="color:#65737e;">//{id: 1}
</span><span style="color:#65737e;">//{id: 3}
</span><span>
</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">delete</span><span>(</span><span style="color:#bf616a;">third</span><span>);
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">After delete: </span><span>&quot;,</span><span style="color:#bf616a;">s</span><span>);
</span><span style="color:#65737e;">//After delete:  Set(2) {size: 2, {id: 0}, {id: 1}}
</span><span>
</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">clear</span><span>();
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">After clear: </span><span>&quot;,</span><span style="color:#bf616a;">s</span><span>);
</span><span style="color:#65737e;">//After clear:  Set(0) {size: 0}
</span><span>
</span></code></pre>
<h3 id="die-dai-fang-fa-1"><strong>迭代方法</strong></h3>
<p>迭代器：<code>keys</code>、<code>values</code>、<code>entries</code>。</p>
<p>迭代方法：<code>forEach</code></p>
<ol>
<li>
<p><code>forEach</code></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">forEach</span><span>(</span><span style="color:#b48ead;">function</span><span>(</span><span style="color:#bf616a;">val</span><span>,</span><span style="color:#bf616a;">duplicate_val</span><span>,</span><span style="color:#bf616a;">set</span><span>){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(</span><span style="color:#bf616a;">val</span><span>,</span><span style="color:#bf616a;">duplicate_val</span><span>,</span><span style="color:#bf616a;">set</span><span>);
</span><span>});
</span><span style="color:#65737e;">//{id: 0} {id: 0} Set(2) {size: 2, {id: 0}, {id: 1}}
</span><span style="color:#65737e;">//{id: 1} {id: 1} Set(2) {size: 2, {id: 0}, {id: 1}}
</span></code></pre>
</li>
<li>
<p><code>keys</code></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">keys </span><span>= </span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">keys</span><span>();
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">keys:</span><span>&quot;,</span><span style="color:#bf616a;">keys</span><span>);</span><span style="color:#65737e;">//keys: SetIterator {{id: 0}, {id: 1}}
</span><span style="color:#b48ead;">for</span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">key </span><span>of </span><span style="color:#bf616a;">keys</span><span>){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">key:</span><span>&quot;,</span><span style="color:#bf616a;">key</span><span>);
</span><span>    </span><span style="color:#65737e;">//key: {id: 0}
</span><span>    </span><span style="color:#65737e;">//key: {id: 1}
</span><span>}
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">keys after used: </span><span>&quot;,</span><span style="color:#bf616a;">keys</span><span>);</span><span style="color:#65737e;">//keys after used:  SetIterator
</span><span>
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">keys_arr </span><span>= </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">keys</span><span>());
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">keys_arr: </span><span>&quot;,</span><span style="color:#bf616a;">keys_arr</span><span>); </span><span style="color:#65737e;">//keys_arr:  (2) [{id:0}, {id:1}]
</span></code></pre>
<p><strong>注意：一个迭代器不可重复使用</strong></p>
</li>
<li>
<p><code>values</code></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">values </span><span>= </span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">values</span><span>();
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">values:</span><span>&quot;,</span><span style="color:#bf616a;">values</span><span>);</span><span style="color:#65737e;">//values: SetIterator {{id: 0}, {id: 1}}
</span><span>
</span><span style="color:#b48ead;">for</span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">val </span><span>of </span><span style="color:#bf616a;">values</span><span>){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">val:</span><span>&quot;,</span><span style="color:#bf616a;">val</span><span>);
</span><span>    </span><span style="color:#65737e;">//val: {id: 0}
</span><span>    </span><span style="color:#65737e;">//val: {id: 1}
</span><span>}
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">values after used: </span><span>&quot;,</span><span style="color:#bf616a;">keys</span><span>);</span><span style="color:#65737e;">//values after used:  SetIterator
</span><span>
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">values_arr </span><span>= </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">values</span><span>());
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">values_arr: </span><span>&quot;,</span><span style="color:#bf616a;">values_arr</span><span>); </span><span style="color:#65737e;">// //values_arr:  (2) [{id:0}, {id:1}]
</span></code></pre>
</li>
<li>
<p><code>entries</code></p>
<pre data-lang="js" style="background-color:#2b303b;color:#c0c5ce;" class="language-js "><code class="language-js" data-lang="js"><span style="color:#b48ead;">const </span><span style="color:#bf616a;">entries </span><span>= </span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">entries</span><span>();
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">entries:</span><span>&quot;,</span><span style="color:#bf616a;">entries</span><span>);</span><span style="color:#65737e;">//entries: SetIterator {{id: 0} =&gt; {id: 0}, {id: 1} =&gt; {id: 1}}
</span><span>
</span><span style="color:#b48ead;">for</span><span>(</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">entry </span><span>of </span><span style="color:#bf616a;">entries</span><span>){
</span><span>    </span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">entry:</span><span>&quot;,</span><span style="color:#bf616a;">entry</span><span>);
</span><span>    </span><span style="color:#65737e;">//entry: (2) [{id:0}, {id:0}]
</span><span>    </span><span style="color:#65737e;">//entry: (2) [{id:1}, {id:1}]
</span><span>}
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">entries after used: </span><span>&quot;,</span><span style="color:#bf616a;">entries</span><span>);</span><span style="color:#65737e;">//entries after used:  SetIterator
</span><span>
</span><span style="color:#b48ead;">let </span><span style="color:#bf616a;">entries_arr </span><span>= </span><span style="color:#ebcb8b;">Array</span><span>.</span><span style="color:#8fa1b3;">from</span><span>(</span><span style="color:#bf616a;">s</span><span>.</span><span style="color:#96b5b4;">entries</span><span>());
</span><span style="color:#ebcb8b;">console</span><span>.</span><span style="color:#96b5b4;">log</span><span>(&quot;</span><span style="color:#a3be8c;">entries_arr: </span><span>&quot;,</span><span style="color:#bf616a;">entries_arr</span><span>); </span><span style="color:#65737e;">//entries_arr:  (2) [[{id:0}, {id:0}], [{id:1}, {id:1}]]
</span></code></pre>
</li>
</ol>
<h2 id="weakset"><em><strong>WeakSet</strong></em></h2>
<p>同<code>WeakMap</code>，<code>WeakSet</code>具有以下特点：</p>
<ol>
<li>成员都是对象（引用）；</li>
<li>成员都是弱引用，随时可以消失，不阻止垃圾回收。可以用来保存DOM 节点，不容易造成内存泄露；</li>
<li>不能遍历，方法有 add、delete、has；</li>
</ol>
<h2 id="die-dai-yu-kuo-zhan-cao-zuo">迭代与扩展操作</h2>
<p><code>...</code>为迭代数据类型的扩展操作符。</p>

  </div>
  
    
  
  <div class="card my-5">
    <div class="row g-0">
      <div class="col-md-4 d-flex align-items-center">
        
  <img
    src="https:&#x2F;&#x2F;dorname.github.io&#x2F;authors&#x2F;liguangqiao&#x2F;harry.jpg"
    class="img-fluid m-auto d-block rounded-circle"
    alt="Li Guangqiao"
  />

      </div>
      <div class="col-md-8">
        <div class="card-body">
          <h5 class="card-title">
            <a
              class="text-decoration-none text-reset"
              href="https://dorname.github.io/authors/liguangqiao/"
            >Li Guangqiao</a>
          </h5>
          <p class="card-text"><p>一个正在转rust的ExtJs前端工程师。迷信rust的整体发展，十分相信rust在各个领域都能发光发热，至少目前rust在很多领域上验证了其安全性、易维护性。但说实话对于我这种菜鸡也是真的难上手哈哈哈~~。
思路总结：</p>
<ul>
<li>万物诞生都会有一个需求来源，每一个改变都是为了解决某个问题，最后应该考虑如何去做</li>
<li>学会掌握一些宏观的知识和理论：系统论、还原论</li>
<li>工程化思想，如何描述整体，从整体架构到模块关联等
故学习东西应该像看地图一样，先看整体了解整体的结构，然后再聚焦每一个模块，对于模块的学习，思考三个问题，“是什么？”、“为什么？”、“怎么做？”；那么设计一个东西时也应该去考虑整体性和关联性。</li>
</ul>
<p>有关于未来的发展，以下是鄙人的粗浅的观点：</p>
<ul>
<li>编程语言未来应该是每个人必备的工具</li>
<li>未来的交互方式应该会以语言交互为主流</li>
<li>下一个去中心化的技术方案出来之前，区块链依然是web3建立价值体系的基础技术方案，如何将现实价值和虚拟价值联通是进入数字世界的一个大难题。</li>
<li>未来注定是AI的世界。AI的进化会伴随绝大部分人的退化，届时除了尖端人才，人们学习的重心会放在何处？</li>
</ul>
</p>
        </div>
      </div>
    </div>
  </div>

  

    </main>
    
  

    
    <footer class="
      mt-auto p-5
      bg-dark
      text-center
      text-white
    ">
      
      <a
        href="mailto:lgqfighting@163.com"
        class="text-reset text-decoration-none"
      >lgqfighting@163.com</a>
      
      
      <div class="mt-2">
        
          <a
            class="text-reset mx-1 bg-transparent"
            href="https:&#x2F;&#x2F;chat.openai.com&#x2F;"
            title="chatGPT"
          ><i class="fab fa-glide-g"></i></a>
        
          <a
            class="text-reset mx-1 bg-transparent"
            href="https:&#x2F;&#x2F;wx.qq.com&#x2F;"
            title="微信"
          ><i class="fab fa-weixin"></i></a>
        
          <a
            class="text-reset mx-1 bg-transparent"
            href="https:&#x2F;&#x2F;www.google.com&#x2F;"
            title="谷歌"
          ><i class="fab fa-google"></i></a>
        
      </div>
      
    </footer>
    
  </body>
</html>
