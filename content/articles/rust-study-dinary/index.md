---
title: rustå­¦ä¹ 
date: 2023-05-13
extra:
    image: rust.jpg
taxonomies:
  tags:
    - Rust
  authors:
    - liguangqiao  
---
# Rustç›¸å…³çŸ¥è¯†çš„æ€ç»´å¯¼å›¾

![rustçŸ¥è¯†å¤§çº²](rust_common.png)

# æµ…å…¥RuståŸºç¡€

**ç›®æ ‡ï¼šé¦–å…ˆæ€»ç»“å½’çº³Rustçš„åŸºæœ¬å†…å®¹ï¼Œæ¥ç€æ¯å¤©å›é¡¾ä¸€ä¸ªäº†è§£è¿‡çš„ruståŸºç¡€**

## å¸¸ç”¨è¯­æ³•

### å˜é‡å’Œå¯å˜æ€§

- å˜é‡çš„å£°æ˜ 

  ```rust
  //let å˜é‡å:å˜é‡ç±»å‹ = å˜é‡å€¼
  let x = 5
  ```

- å¸¸é‡çš„å£°æ˜

  ```rust
  //const å¸¸é‡å:å¸¸é‡ç±»å‹ = å¸¸é‡å€¼
  const THE_X:U32 = 60*3;
  ```

- å˜é‡çš„å¯å˜æ€§æ ‡è®°

  ```rust
  //å˜é‡çš„å¯å˜æ€§æ ‡è®° mut
  let mut x = 5;
  x = 6;
  ```

  **å…¶ä»–è¯´æ˜ï¼š**

  - å¯å˜å˜é‡é‡æ–°å£°æ˜æˆå¸¸æ€å˜é‡åï¼Œå¯å˜æ€§ä¼šè¢«è¦†ç›–æ‰ï¼ŒåŒæ—¶ä¹Ÿä¼šæœ‰ç›¸åº”çš„é”™è¯¯æç¤ºã€‚

    ```rust
    let mut x = 5;
    let x = x+1;
    x = x+2; //cannot mutate immutable variable `x`
    ```

- å˜é‡çš„å°é—­æ€§

  å˜é‡çš„å°é—­æ€§å¯ä»¥ç†è§£æˆï¼Œå£°æ˜åŒåå˜é‡ï¼Œä¼šå°†ä¸Šä¸€ä¸ªå£°æ˜è¦†ç›–ï¼Œç›´åˆ°ä¸‹ä¸€ä¸ªåŒåå˜é‡è¢«å£°æ˜ï¼Œæˆ–è€…ä½œç”¨åŸŸç»“æŸã€‚

  ```rust
  fn variablie(){
      let x = 5;
      let x = x + 2;
      {
          let x = x * x;
          println!("ä½œç”¨åŸŸå†…x = {}",x);
      }
      println!("å˜é‡x = {}",x);
  }
  ```

  ```
  //output
  ä½œç”¨åŸŸå†…x = 49
  å˜é‡x = 7
  ```

  xä¸ºå¯å˜å˜é‡ï¼Œxåœ¨å†…éƒ¨å—ä½œç”¨åŸŸå†…é‡æ–°å£°æ˜å¹¶èµ‹å€¼

  ```rust
  fn variablie_mut(){
      let mut x = 5;
      x = x+1;
      {
          let x = x * x;
          println!("åœ¨ä½œç”¨åŸŸå†…å¯å˜å˜é‡x = {}",x);
      }
      println!("å¯å˜å˜é‡x = {}",x);
  }
  ```

  ```
  //output
  åœ¨ä½œç”¨åŸŸå†…å¯å˜å˜é‡x = 36
  å¯å˜å˜é‡x = 6
  ```
  xä¸ºå¯å˜å˜é‡ï¼Œxåœ¨å†…éƒ¨å—ä½œç”¨åŸŸå†…ä»…ä»…é‡æ–°èµ‹å€¼
  ```rust
  fn variablie_mut(){
      let mut x = 5;
      x = x+1;
      {
          x = x * x;
          println!("åœ¨ä½œç”¨åŸŸå†…å¯å˜å˜é‡x = {}",x);
      }
      println!("å¯å˜å˜é‡x = {}",x);
  }
  ```

  ```
  //output
  åœ¨ä½œç”¨åŸŸå†…å¯å˜å˜é‡x = 36
  å¯å˜å˜é‡x = 36
  ```


### æ•°æ®ç±»å‹
#### æ ‡é‡ç±»å‹

![æ ‡é‡ç±»å‹](scalar.png)

##### æ•´å‹

Rustçš„æ•´å‹ç±»å‹æ ¹æ®é•¿åº¦åˆ’åˆ†æœ‰6ç±»å’Œæœ‰å­—ç¬¦å’Œæ— å­—ç¬¦ç»„åˆèµ·æ¥ä¸€å…±æœ‰12ä¸­æ•´å‹ç±»å‹å¦‚ä¸‹å›¾ï¼š

![æ•´å‹åˆ†ç±»](int.png)

æ¯ä¸€ç§å­˜å‚¨ç±»å‹çš„å­˜å‚¨ç©ºé—´çš„è®¡ç®—å…¬å¼ï¼ˆé™¤äº†archç±»å‹ï¼‰ï¼š
$$
-(2^{n-1})\ \ to\ \  2^{n-1}-1
$$
**æ³¨æ„**ï¼š

archç±»å‹å–å†³äºè®¡ç®—æœºæ¶æ„ï¼Œ64ä½æ¶æ„å¯¹åº”n = 64ï¼Œ32ä½æ¶æ„å¯¹åº”n = 32ã€‚

##### æµ®ç‚¹å‹

```rust
let x = 1.0; //é»˜è®¤f64
let y:f32 = 2.0; //å£°æ˜ç±»å‹f32
```

##### æ•°å€¼æ“ä½œ

æ•°å€¼æ“ä½œä¸»è¦åŒ…æ‹¬å¢ã€åˆ ã€æ”¹ã€æŸ¥å’Œå–ä½™ã€‚

```rust
// addition
    let sum = 5 + 10;

    // subtraction
    let difference = 95.5 - 4.3;

    // multiplication
    let product = 4 * 30;

    // division
    let quotient = 56.7 / 32.2;
    let truncated = -5 / 3; // Results in -1

    // remainder
    let remainder = 43 % 5;
```

##### å¸ƒå°”ç±»å‹

å¸ƒå°”ç±»å‹çš„åªæœ‰ä¸¤ä¸ªå€¼ï¼štrueå’Œfalseã€‚

å¸ƒå°”ç±»å‹åªæœ‰ä¸€ä¸ªå­—èŠ‚ã€‚

åœ¨Rustä¸­å®é™…æ˜¯ä½¿ç”¨boolæ¯”å¦‚ï¼š

```rust
let t = true;
let f:bool = false;
```

å¸ƒå°”ç±»å‹çš„ä¸»è¦ä½œç”¨æ˜¯æ¡ä»¶åˆ¤æ–­ã€‚æ¯”å¦‚æ§åˆ¶æµä¸­çš„**if**è¡¨è¾¾å¼

##### å­—ç¬¦ç±»å‹

Rust çš„char ç±»å‹æ˜¯è¯¥è¯­è¨€æœ€åŸºç¡€çš„å­—æ¯ç±»å‹ä¾‹å¦‚ï¼š

```rust
fn main() {
    let c = 'z';
    let z: char = 'â„¤'; // with explicit type annotation
    let heart_eyed_cat = 'ğŸ˜»';
}
```

**æ³¨æ„ï¼š**

å­—ç¬¦å­—é¢é‡ä½¿ç”¨å•å¼•å·ï¼Œè€Œå­—ç¬¦ä¸²å­—é¢é‡ä½¿ç”¨åŒå¼•å·

Rustçš„å­—ç¬¦ç±»å‹å¤§å°æ˜¯4å­—èŠ‚è€Œä¸”ä»£è¡¨Unicodeæ ‡é‡å€¼ã€‚è¿™æ„å‘³ç€å®ƒå¯ä»¥è¡¨ç¤ºçš„ä¸ä»…ä»…æ˜¯ASCIIã€‚é‡éŸ³å­—æ¯;ä¸­æ–‡ã€æ—¥æ–‡ã€éŸ©æ–‡;emoji;å’Œé›¶å®½åº¦ç©ºæ ¼åœ¨Rustä¸­éƒ½æ˜¯æœ‰æ•ˆçš„å­—ç¬¦å€¼.

#### å¤åˆç±»å‹

å¤åˆç±»å‹çš„ç›®æ ‡åœºæ™¯ï¼šå¯ä»¥å°†å¤šä¸ªå€¼ç»„åˆ°ä¸€ä¸ªç±»å‹ä¸­ã€‚

Rust æ‹¥æœ‰ä¸¤ä¸ªåŸå§‹å¤åˆç±»å‹

1. å…ƒç»„
2. æ•°ç»„

##### å…ƒç»„

å…ƒç»„æ˜¯ä¸€ç§å°†å¤šç§ç±»å‹çš„å€¼ç»„åˆæˆä¸€ç§å¤åˆç±»å‹çš„é€šç”¨æ–¹æ³•ã€‚

å…ƒç»„æœ‰å›ºå®šçš„é•¿åº¦:ä¸€æ—¦å£°æ˜ï¼Œå®ƒä»¬å°±ä¸èƒ½å¢å¤§æˆ–ç¼©å°

ä¾‹å¦‚ï¼š

```rust
let tup:(i32,f64,u8) = (500,6.4,1);
```

å…ƒç»„è§£æ„

- ç”¨æ¨¡å¼åŒ¹é…çš„æ–¹å¼è§£æ„å…ƒç»„

```rust
//å£°æ˜å…ƒç»„
let tup = (500,6.4,1);
let (x,y,z) = tup;
println!("x = {}\n y = {} \n z = {}",x,y,z);
```

- ä½¿ç”¨ (*.*) çš„æ–¹å¼è¿›è¡Œè§£æ„

```rust
fn main() {
    let x: (i32, f64, u8) = (500, 6.4, 1);

    let five_hundred = x.0;

    let six_point_four = x.1;

    let one = x.2;
    println!("x = {}\n y = {} \n z = {}",five_hundred,six_point_four,one);
}
```

 ç©ºå…ƒç»„æ‹¥æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åå­—**unit**ï¼Œè¿™ä¸ªå€¼å†™ä½œ**()**ä»£è¡¨å…ƒç»„ç©ºå€¼ç±»å‹ä½ä¸€ä¸ªç©ºçš„è¿”å›ç±»å‹ã€‚

##### æ•°ç»„

æ•°ç»„çš„å£°æ˜
```rust
let a = [1,2,3,4,5];
```

**æ³¨æ„ï¼š**

1. å¦‚æœä½ å¸Œæœ›åœ¨å †æ ˆä¸Šåˆ†é…æ•°æ®è€Œä¸æ˜¯ç›´æ¥åœ¨å †ä¸Šåˆ†é…ï¼Œæ•°ç»„éå¸¸æœ‰ç”¨çš„ã€‚

2. å½“ä½ ç¡®ä¿ä½ çš„å…ƒç´ æ˜¯å…·æœ‰å›ºå®šé•¿åº¦æ—¶ï¼Œæ•°ç»„éå¸¸æœ‰ç”¨ã€‚

3. ä½†æ•°ç»„å¹¶æ²¡æœ‰åƒå®¹å™¨ï¼ˆ*Vector*ï¼‰é‚£æ ·ï¼Œå¤§å°å¯ä»¥çµæ´»çš„å¢åŠ æˆ–è€…å‡å°‘

4. ç„¶è€Œæ•°ç»„å¯¹äºå›ºå®šé•¿åº¦ä¸”ä¸éœ€è¦å˜åŒ–çš„å›ºå®šå€¼é›†åˆæ›´æœ‰ç”¨æ¯”å¦‚ï¼šæœˆä»½æ•°ç»„

```rust
let months = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
```

å£°æ˜ç±»å‹å’Œé•¿åº¦

$$
let\ å˜é‡å:[æˆå‘˜ç±»å‹;æ•°ç»„é•¿åº¦] = [æˆå‘˜1,æˆå‘˜2,...]
$$

```rust
//å£°æ˜ç±»å‹å’Œé•¿åº¦
let a:[i32;5] = [1,2,3,4,5];

```

å¿«é€Ÿå£°æ˜å…ƒç´ ç›¸åŒçš„æ•°ç»„

$$
let\ å˜é‡å:[æˆå‘˜å€¼;æ•°ç»„é•¿åº¦];
$$

```rust
let a = [3;5]
// a = [3,3,3,3,3]

```

æœ‰æ•ˆæ•°ç»„è®¿é—®æœºåˆ¶ï¼šé€šè¿‡æ•°ç»„ç´¢å¼•å»è®¿é—®ï¼Œä½†ç´¢å¼•ä¸èƒ½è¶…è¿‡æ•°ç»„çš„é•¿åº¦ã€‚

### å‡½æ•°

##### å‚æ•°

Rustå‡½æ•°çš„å‚æ•°å£°æ˜

```rust
//()æ‹¬å·å†…å®¹å£°æ˜å‚æ•°åå’Œå‚æ•°ç±»å‹
fn test_fn(x:i32){
    
}
fn main(){
    test_fn(5);
}
```

##### è¯­å¥å’Œè¡¨è¾¾å¼

å‡½æ•°ä½“å†…å®¹ç”±ä¸€ç³»åˆ—è¯­å¥ç»„æˆï¼Œå¹¶å¯é€‰æ‹©æ€§çš„ä½¿ç”¨è¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼ã€‚

**æ³¨æ„ï¼š** *Rust* æ˜¯ä¸€é—¨åŸºäºè¡¨è¾¾å¼çš„è¯­è¨€ï¼Œè¿™ä¹Ÿæ˜¯*Rust*ç‰¹æœ‰çš„éƒ¨åˆ†ï¼Œå…¶ä»–è¯­è¨€å¹¶æ²¡æœ‰ç›¸åŒçš„è§„åˆ™ã€‚

**è¯­å¥ï¼š**è¯­å¥æ˜¯æ‰§è¡ŒæŸäº›æ“ä½œä½†ä¸è¿”å›å€¼çš„æŒ‡ä»¤

**è¡¨è¾¾å¼ï¼š**è¡¨è¾¾å¼å®é™…ä¸ŠæŒ‡çš„æ˜¯è¡¨è¾¾å¼çš„ç»“æœå€¼

```rust
let y = 6; //statement
let z = {
    let x = 3;
    x+2 //expression
}//expression
// y = 6,z=5
```

##### å‡½æ•°è¿”å›å€¼

å‡½æ•°è¿”å›å€¼å£°æ˜ 
$$
fn å‡½æ•°å() -> è¿”å›å€¼ç±»å‹
$$

ä½¿ç”¨returnè¿”å›

```rust
fn test_fn() -> i32 {
 	return  5;
}
```

ä½¿ç”¨è¡¨è¾¾å¼è¿”å›

```rust
fn test_fn() -> i32 {
    5
}
fn test_one(x:i32) -> i32{
    x+1
}
```

### æ³¨é‡Š

```rust
// å•è¡Œæ³¨é‡Š
/**
*æ³¨é‡Šå—
*/
```

### æ§åˆ¶æµ

##### if è¡¨è¾¾å¼

*if*è¡¨è¾¾å¼çš„å­˜åœ¨ä¸»è¦æ˜¯ä¸ºäº†åˆ†æ”¯åˆ¤æ–­å¤„ç†ä¾‹å¦‚ï¼š

```rust
fn main() {
    let number = 3;

    if number < 5 {
        println!("condition was true");
    } else {
        println!("condition was false");
    }
}
```

**åœ¨letè¯­å¥ä¸­ä½¿ç”¨if**

```rust
let condition = 5>3;
let number = if condition {
    5
} else {
    3
}
println!("{number}");
//println!("{}",number);
```

**æ³¨æ„ï¼š**

åŸç†ï¼š*Rust*ä¸­å˜é‡ç±»å‹æ˜¯å•ä¸€çš„ã€‚

æ•…å½“ifå’Œelseè¿”å›çš„å€¼ç±»å‹ä¸ä¸€è‡´æ—¶ä¼šæŠ¥é”™ï¼Œä¾‹å¦‚ï¼š

```rust
let condition = true;

let number = if condition { 5 } else { "six" };

println!("The value of number is: {number}");
```

##### loopå¾ªç¯ä½“

```rust
//æ­»å¾ªç¯
loop{
    println!("again!");
}
```

åˆ©ç”¨å¾ªç¯ä½“è¿”å›å€¼

$$
break + è¯­å¥
$$

```rust
let mut counter = 0;
let result = loop {
    counter += 1;
    if counter == 10{
        //break åå¯ä»¥æ·»åŠ å¾ªç¯çš„è¿”å›å€¼
        break counter * 2;
    }
};
```

##### å¾ªç¯æ ‡ç­¾

å¾ªç¯ä½“å…è®¸æ·»åŠ å¾ªç¯ä½“æ ‡ç­¾ï¼Œç›®çš„æ˜¯æ¶ˆé™¤å¤šä¸ªå¾ªç¯ä¹‹é—´çš„æ­§ä¹‰ã€‚

ä¾‹å¦‚ï¼š
```rust
fn main() {
    let mut count = 0;
    'counting_up: loop {
        println!("count = {count}");
        let mut remaining = 10;

        loop {
            println!("remaining = {remaining}");
            if remaining == 9 {
                break;
            }
            if count == 2 {
                break 'counting_up;
            }
            remaining -= 1;
        }

        count += 1;
    }
    println!("End count = {count}");
}
```

**while+å¾ªç¯æ¡ä»¶**

å¾ªç¯æ¡ä»¶ä¸ºçœŸï¼Œæ‰§è¡Œå¾ªç¯ä½“

```rust
fn main() {
    let mut number = 3;

    while number != 0 {
        println!("{number}!");

        number -= 1;
    }

    println!("LIFTOFF!!!");
}
```

å¾ªç¯ä¸€ä¸ªæ•°ç»„

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    while index < 5 {
        println!("the value is: {}", a[index]);

        index += 1;
    }
}
```

##### é›†åˆçš„forå¾ªç¯

æ•°ç»„æ¢æˆforå¾ªç¯

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];
    let mut index = 0;

    for index in 0..5 {
        println!("the value is: {}", a[index]);
    }
}
```

å¢å¼ºforå¾ªç¯:å¯ä»¥é¿å…è¶Šç•Œé—®é¢˜

```rust
fn main() {
    let a = [10, 20, 30, 40, 50];

    for item in a {
        println!("the value is: {}", item);
    }
}
```

å¦ä¸€ç§é¿å…å¾ªç¯è¶Šç•Œçš„æ–¹å¼æ˜¯å€’åºå¾ªç¯

```rust
fn main() {
    //revæ–¹æ³•æ˜¯å°†æ•°ç»„(1..4)å€’åºéå†
    //å‰é—­åå¼€
    for number in (1..4).rev() {
        println!("{number}!");
    }
    println!("LIFTOFF!!!");
}
```



